(this["webpackJsonpsupport-chat-widget"]=this["webpackJsonpsupport-chat-widget"]||[]).push([[1],{28:function(n,e,t){"use strict";var a,r=t(23),i=(t(12),t(24)),o=t(8),s=i.a.div(a||(a=Object(r.a)(["\n    width:30px;\n    height:30px;\n    min-width:30px;\n    min-height:30px;\n    border-radius: 40%;\n    background-color: #a2a786;\n    background-size: cover;\n    background-position: center;\n    background-repeat:no-repeat;\n    &[data-dukascopy]{\n        background-size:80%;\n        background-color:#da2221;\n        background-image:url(data:image/png;base64,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);\n    }\n"])));e.a=function(n){var e=n.avatar;return Object(o.jsx)(s,{"data-dukascopy":"dukascopy"===e})}},39:function(n,e,t){"use strict";t.r(e);var a,r,i,o,s,c,d,u,l,p,g,b,h=t(23),x=t(12),A=t.n(x),m=t(24),f=t(0),j=t(13),O=t(25),v=t(8),M=m.a.div(a||(a=Object(h.a)(["\n  position: relative;\n  z-index: 10;\n"]))),y=m.a.div(r||(r=Object(h.a)(["\n  position: absolute;\n  top: 10px;\n  background: gray;\n  border-radius: 5px;\n  padding: 5px 5px;\n  max-width: 400px;\n  width: max-content;\n"]))),S=function(n){var e=n.text,t=n.open;return Object(v.jsx)(M,{style:{display:"".concat(t?"block":"none")},children:Object(v.jsx)(y,{children:e})})},w=m.a.div(i||(i=Object(h.a)(["\n  background-color: ",";\n  color: ",";\n  padding: 5px 15px;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: unset;\n"])),j.a.chatColor,j.a.chatHeadColor),C=m.a.div(o||(o=Object(h.a)(['\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  min-height: 40px;\n  background: white;\n  border-radius: 10px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin: 0px 5px;\n  border: 0.5px solid black;\n  position: relative;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAADtklEQVRoge2az2scZRjHP8/MJCAYFESrNpSWCC3iRf0DepGiFkwFHZ11QgkKNRsTiwdP0mpPXo1JShDRJJsNLGylsVVQFHuoBwV7KMWToWCsh4jWxIPd7LyPh8QaEs3sj2fSCPO57vt+9/vd533fed93FnJycnJydi6yHV8yMVXZkwT1XpTDCnuB7rWPFgSuKnoOzzs7GEU/Zu0l08CnJyu7kyA5IeiLgJ/S3IFUPY/XB6LoalaeMgs8Xi4fUWUauL3JrsviJC72RXNZ+PKyEB2bmXlVlSrNhwXoUk8/Gp2ZHbb2BRlUeK2yVdr/MZ04edq60qaBR0qlbl+872mtsv/GsvPkwFAUXTPSsx3SnninsAsL0OU7fctQz67CE1OVPXW/Pk/6atwsSaJu73AcL1iImVV4xU+OYB8WwA/we63EzAKL6hNWWhtR0SettOzmsMgDZlqb6bESMly09F47rU3sthKyXKUtV+fMtDPZae1kLAP/Yai1kSUrIcvAZruhLLXtAivzZlqbMdM2fCzpeTOtDSh6zkrLLrDnnQUSM71/qDvVj63EzAKvXs/Ih1Z6N1Het9pHg/Vpqe6fBJYNJZcCTUxPS6aBB46GP4l6z2EztB1CfKyv72cDrZuYbzyK8fOfKvIa4NqQcSIcHywUzObu32R3iTc9+5R6WgK6muy6pOpeeCWOzVbm9WS2tSz2RXNJR9ADOgLUG+jiBJ0OXHIgq7CwTRfxI6VSd4Dfq+IOg+xj3UU8MI9wPnFuznI1zsnJycn5P5LZY6lSqfiLtdojIvKwU3lIRB8E6QbuBO4AQLmO8DvoAnBF4Eried/t8v1LYRhmcfKyDXx6auoeFwTPoHII9CCr4VrhN4SvxMln9U6/OhyGi1Ye2w5cqVQ6F1dWnkUlRngMCAx8racO+jki03cHQTUMw1o7Yi0HHp2cvEs6Ol5GGQTua8dEE1wTZbSzM5h4KQx/bUWg6cBrFR0AeZPWh2y7XBf07dtqtXf6+/v/bKZjU4HHy+WDqvIB6L7m/GWDwA+JuqNDcXyx0T4NnZZUVcZmZk+p8sVOCQug0OOJd2G8XD6hqg0VL7WRqspYufyuIIPtW8wQ4b1iFB0TEd2qWer73F379w+BnLRzlhmPfnv58i+fnDnzzVaNUoe0KsftPGWNpP7zp5E5fL+Bk+0i1WsjgS8ZGNkuUr2mBvaEN2jsTupWsyKrXrckNfBAofClqjyO8jVww8SaLTcEueicHCoWChdutZmcnJycnJyc/+YvUbMou8GhctcAAAAASUVORK5CYII=);\n  &::after {\n    background-color: red;\n    border-radius: 50%;\n    content: "";\n    height: 10px;\n    width: 10px;\n    position: absolute;\n    top: -3px;\n    right: -3px;\n  }\n  &[data-online="true"]&::after {\n    background-color: green;\n  }\n']))),I=function(n){var e=n.users,t=n.onlineUsers,a=Object(x.useState)({uid:"",open:!1}),r=Object(O.a)(a,2),i=r[0],o=r[1];return Object(v.jsx)(w,{children:e.map((function(n){var e;return Object(v.jsxs)(A.a.Fragment,{children:[Object(v.jsx)(C,{style:n.avatar?{backgroundImage:"url(".concat(n.avatar,")")}:{},"data-online":null===(e=t.get(n.uid))||void 0===e?void 0:e.online,onMouseOver:function(){return o({uid:n.uid,open:!0})},onMouseOut:function(){return o({uid:n.uid,open:!1})}}),Object(v.jsx)(S,{text:n.name,open:i.uid===n.uid&&i.open})]},n.uid+i+t.values)}))})},E=m.a.div(s||(s=Object(h.a)(["\n  position: relative;\n  background-color: ",";\n  color: ",';\n  font-family: "Open Sans", sans-serif;\n  font-style: normal;\n  font-weight: 700;\n  padding: 15px 30px;\n  cursor: pointer;\n  text-transform: uppercase;\n  letter-spacing: 0.02em;\n  font-size: 22px;\n  line-height: 30px;\n  &[data-uid]::after {\n    content: attr(data-uid);\n    display: block;\n    font-size: 12px;\n    opacity: 0.4;\n    line-height: 14px;\n    font-family: "SF Pro Display";\n    font-weight: 400;\n  }\n  &[data-status="0"]::before {\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  &[data-status="1"]::before {\n    background-color: #ff9009e1;\n  }\n  &[data-status="2"]::before {\n    background-color: #15ff09e0;\n  }\n'])),j.a.chatColor,j.a.chatHeadColor),k=m.a.div(c||(c=Object(h.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  position: absolute;\n  right: 30px;\n  width: 20px;\n  height: 20px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  top: calc(50% - 10px);\n"]))),D=m.a.div(d||(d=Object(h.a)(['\n  &[data-show-status="true"]&::after {\n    background-color: red;\n    border-radius: 50%;\n    content: "";\n    height: 10px;\n    width: 10px;\n    position: absolute;\n    top: 20px;\n    margin: 0px 10px;\n  }\n  &[data-show-status="true"]&[data-online]&::after {\n    background-color: green;\n  }\n']))),R=function(n){var e,t,a=Object(x.useState)(null),r=Object(O.a)(a,2),i=r[0],o=r[1],s=Object(x.useState)(0),c=Object(O.a)(s,2),d=c[0],u=c[1],l=Object(x.useState)(new Map),p=Object(O.a)(l,2),g=p[0],b=p[1];Object(x.useEffect)((function(){return f.a.S_CHAT_OPENED.add((function(n){o(n)}),"ChatHead"),f.a.S_WS_AUTHORIZED.add((function(n){u("guest"===n?1:2)}),"ChatHead"),f.a.S_WS_CLOSED.add((function(){u(0)}),"ChatHead"),f.a.S_CHAT_USER_STATUS_CHANGED.add((function(){f.a.REQ_USERS_STATUS.invoke().then((function(n){b(n)}))}),"ChatHead"),function(){f.a.S_CHAT_OPENED.clearContext("ChatHead"),f.a.S_WS_AUTHORIZED.clearContext("ChatHead"),f.a.S_WS_CLOSED.clearContext("ChatHead"),f.a.S_CHAT_OPENED.clearContext("ChatHead")}}));var h=function(){return!!((null===i||void 0===i?void 0:i.users)&&(null===i||void 0===i?void 0:i.users.length)>1)},A=Object(v.jsx)(D,{children:"Loading..."});null!=i&&(A=Object(v.jsx)(D,{"data-show-status":!h(),"data-online":!h()&&(null===(e=g.get(null===i||void 0===i||null===(t=i.users[0])||void 0===t?void 0:t.uid))||void 0===e?void 0:e.online),children:i.title}));var m=null;if(null!=i&&n.messenger&&"private"===i.type){m=Object(v.jsx)("div",{onClick:function(n){f.a.S_REQUEST_CALL.invoke({chatVO:i,audio:!0,video:!0})},children:"CALL"})}var j=n.messenger?null:Object(v.jsx)(k,{onClick:function(n){f.a.S_LOG.invoke("on close button click"),f.a.S_GUI_CLOSE_CHAT.invoke({uid:null===i||void 0===i?void 0:i.uid})}});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(E,{onDoubleClick:n.onDoubleClick,id:"chatHead","data-staus":d,"data-uid":i?null===i||void 0===i?void 0:i.uid:"...",children:[A,j,m]}),h()&&(null===i||void 0===i?void 0:i.users)&&Object(v.jsx)(I,{users:null===i||void 0===i?void 0:i.users,onlineUsers:g})]})},T=t(6),B=m.a.div(u||(u=Object(h.a)(["\n  display: flex;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 13px 15px 18px 15px;\n  background-color: ",";\n  align-items: center;\n"])),j.a.chatColor),H=null,U=m.a.div(l||(l=Object(h.a)(["\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  align-self: center;\n"]))),z=Object(m.a)(U)(p||(p=Object(h.a)(["\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTEuMjUiIHN0cm9rZT0iI0M4RDBEQiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggZD0iTTEyIDVWMTlNNSAxMkgxOSIgc3Ryb2tlPSIjQzhEMERCIiBzdHJva2Utd2lkdGg9IjEuNSIvPgo8L3N2Zz4K);\n"]))),G=Object(m.a)(U)(g||(g=Object(h.a)(["\n  border-radius: 50%;\n  background-size: 60%;\n  background-color: ",";\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjMiIHZpZXdCb3g9IjAgMCAyNCAyMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuMDgyMzEgOS45NjQyNkMxLjI5MyA5Ljc1MjE0IDAuODMzMzk0IDguOTcxMjIgMS4wNTYyIDguMjE4ODRDMS4xODkwOSA3Ljc2ODkzIDEuNTQ3NzcgNy40MTAzNCAyLjAxMzM3IDcuMjYxOTVMMjIuMDY3IDEuMDM1NTNDMjIuNDYwNiAwLjkxMjgyMyAyMi44ODQzIDEuMTE4MjggMjMuMDEzMiAxLjQ5MzA0QzIzLjA2MjEgMS42MzU3MiAyMy4wNjIxIDEuNzg5ODEgMjMuMDE0MiAxLjkzMjQ5TDE2LjQ3ODggMjEuMDMzMUMxNi4yMiAyMS43NzQxIDE1LjM3ODggMjIuMTczNiAxNC42MDA1IDIxLjkyNzNDMTQuMTMyOSAyMS43Nzg5IDEzLjc3MjIgMjEuNDE4NCAxMy42NDAzIDIwLjk2NjZMMTEuMzk2MiAxMi4wOTExTDIuMDgyMzEgOS45NjQyNloiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTIyLjgyOTYgMS4yMDcwM0wxMS4zOTY1IDEyLjA5MTQiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==);\n  width: 42px;\n  height: 42px;\n  min-width: 42px;\n  min-height: 42px;\n  background-position: 7px 10px;\n"])),j.a.chatSendBtnBg),L=m.a.div(b||(b=Object(h.a)(["\n  flex-grow: 1;\n  max-height: 200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  color: ",';\n  font-size: 15px;\n  line-height: 18px;\n  &:focus {\n    outline: none;\n  }\n  margin: 4px 10px 4px 10px;\n  &[data-prompt="true"] {\n    opacity: 0.7;\n    color: #fff;\n  }\n'])),j.a.chatInputColor),N=!1,J="Type your message...";f.a.S_SHARED_OBJECT_READY.add((function(n){n.promptMessage&&"string"===typeof n.promptMessage&&(J=n.promptMessage)}));var _,P,Q,F,Z,V,X,K,Y,W,q,$,nn,en,tn,an,rn,on,sn,cn,dn,un,ln=function(n){var e=Object(x.useRef)(null),t=Object(x.useRef)(null);Object(x.useEffect)((function(){var n=e.current;return n&&n.addEventListener("paste",a),function(){n&&n.removeEventListener("paste",a)}}));var a=function(n){if(e.current){var t=n;if(t&&t.clipboardData){var a,r=!1,i=Object(T.a)(t.clipboardData.items);try{for(i.s();!(a=i.n()).done;){var o=a.value;if("file"===o.kind){var s=o.getAsFile();s&&f.a.S_CHAT_ATTACH_FILE_REQUEST.invoke([s])}-1===o.type.indexOf("text/rtf")&&-1===o.type.indexOf("editor")||(r=!0)}}catch(u){i.e(u)}finally{i.f()}var c=n.clipboardData.getData("text");r&&(c="{code}"+c+"{code}"),N=!0;var d=window.getSelection();d&&d.rangeCount&&(H||(H=document.createElement("div")),H.textContent=c,c=H.textContent,d.deleteFromDocument(),d.getRangeAt(0).insertNode(document.createTextNode(c)),n.preventDefault())}}},r=function(){if(e.current){var n=e.current.innerHTML;if(n){n=(n=(n=(n=n.replace("\t","TAB")).replaceAll("<br>","\n")).replaceAll("<div>","")).replaceAll("</div>","\n"),e.current.textContent=n,n=e.current.textContent;var t={"&nbsp;":"","&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};for(var a in t)n=n.replaceAll(a,t[a]);n?N?n.length>2e3?f.a.S_ALERT_ERROR.invoke("Message too big!"):(N=!1,e.current.textContent="",e.current.focus(),f.a.S_CHAT_MESSAGE_SEND_REQUEST.invoke(n)):f.a.S_LOGE.invoke("Input wasn't changed"):f.a.S_LOGE.invoke("No text to send")}}};return Object(v.jsxs)(B,{children:[Object(v.jsx)(z,{onClick:function(n){t.current&&t.current.click()}}),Object(v.jsx)(L,{ref:e,onFocus:function(n){e.current&&(N||(e.current.removeAttribute("data-prompt"),e.current.textContent=""))},"data-prompt":!0,onBlur:function(n){e.current&&(e.current.textContent&&0===e.current.textContent.length&&(N=!1),N||(e.current.textContent=J,e.current.setAttribute("data-prompt","true")))},onKeyUp:function(n){e.current&&("Enter"!==n.code||n.altKey||n.ctrlKey||n.shiftKey||(n.preventDefault(),r()),N=!!(e.current.textContent&&e.current.textContent.length>0))},contentEditable:!0,suppressContentEditableWarning:!0,children:J}),Object(v.jsx)(G,{onClick:function(n){r()}}),Object(v.jsx)("input",{ref:t,style:{display:"none"},type:"file",onChange:function(n){var e=n.target.files;if(e){for(var t=[],a=e.length,r=0;r<a;r++){var i=e.item(r);i&&t.push(i)}f.a.S_CHAT_ATTACH_FILE_REQUEST.invoke(t),n.target.value=""}},onPaste:a})]})},pn=t(29),gn=t(5),bn=t(28),hn=m.a.div(_||(_=Object(h.a)(['\n  width: 24px;\n  min-width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  &[data-status="read"] {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABUUlEQVRIie2SsUrDUBiFv5tcIejcgOAbtLZUFzex3XQQKnR08BkC2hcQxb6EjhmyiYtxEMRJkdCAg7vSWcEhudehsWmDqU0nwZ7xkP/Lf85/Ya65/rzErINVz7FFZF4JeH9qn27m+cbscMMH1jRYk3xZFF53OyUVqWugAjxHqN1JfqGK6m6npFA+sJpAtsL22VueXziBRp0nkFDLuBG2uv2q59gqin0QFdA9LVUzbHX73zMFK9J3IJSW8UGQwAedp/BgBA5JRTX36FagF5WMt0c/qLmH9wIWsj6MHjQfDpC8Im1pWBeR4Vc9x04rQf7kTwsfJsgeSZpm42Hv+PUnX8U6yjto7g/SrcwboAy6pz/VRrDf/chum4z9unmmIgha3b6WcQMIQZSxjJXUV80BXFSKwMcSDJNcOEvSksuP7ZOXMd9zbCLzEgAZ70wDn+uf6AselN1N/IXehQAAAABJRU5ErkJggg==);\n  }\n  &[data-status="delivered"] {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA20lEQVRIie2UsQrCMBRFb4Ip/kD7FUoHacFJ1E0Hf9XFzc4uJRBw8BPET+iT1MFWQg21abrZO+aFe+57eQQYNcpXbCgjpVRUFMURACVJsqrP+VDmRJQxxpaMsalZ8wZIKUMiOgOYAbhprQ9m3WtEUspQa50BmFfm6zRN74MAupj3BnQ17wVwMbcC8jy/ABBCiF0cxw+zVm8L3g96FUJsm3ea+tqisiwnABZElCmlIh9zawfNEQDYcM6fLmNpBdjSVsdOyVsBlk7gmvwnAPj8LycACIJg75J81B/pBUirmXOOwxAnAAAAAElFTkSuQmCC);\n  }\n']))),xn=function(n){var e=n.status;return Object(v.jsx)(hn,{"data-status":e})},An=m.a.div(P||(P=Object(h.a)(["\n  height: 5px;\n  margin-right: 5px;\n  background-color: grey;\n  border-radius: 2px;\n  width: 24px;\n  min-width: 24px;\n  cursor: pointer;\n"]))),mn=m.a.div(Q||(Q=Object(h.a)(["\n  height: 5px;\n  margin-right: 5px;\n  background-color: #2faa77;\n  border-radius: 2px;\n  margin-left: -1px;\n"]))),fn=function(n){var e=Object(x.useState)(!1),t=Object(O.a)(e,2),a=t[0],r=t[1],i=n.progress,o=n.total,s=n.chipText;return Object(v.jsxs)(An,{onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},children:[Object(v.jsx)(S,{text:s,open:a}),Object(v.jsx)(mn,{style:{width:"".concat(i/o*100,"%")}})]})},jn=m.a.div(F||(F=Object(h.a)(["\n  background-color: ",";\n  padding: ",";\n  border-radius: ",";\n"])),j.a.chatMessageBotItemBg,j.a.chatMessagePadding,j.a.chatMessageBorderRadius),On=function(n){var e;return Object(v.jsx)(jn,{"data-type":"message",children:null===(e=n.msg.sys)||void 0===e?void 0:e.title})},vn=m.a.div(Z||(Z=Object(h.a)(["\n  cursor: pointer;\n  color: ",";\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 9px 0 9px 0;\n  &:first-child {\n    border-top: none;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"])),j.a.chatMessageBotMenuColor),Mn=function(n){var e=n.data,t=e.text,a=e.action;return Object(v.jsx)(vn,{onClick:function(e){f.a.S_CHAT_BOT_COMMAND_SEND_REQUEST.invoke({action:a,title:t,actionData:null,botUID:n.userUID})},children:t})},yn=m.a.div(V||(V=Object(h.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  margin-bottom: 2px;\n  border-radius: "," ","\n    "," ",";\n  &:nth-last-child() {\n    background-color: green;\n  }\n"])),j.a.chatMessagePadding,j.a.chatMessageBg,j.a.chatTextColor,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius),Sn=m.a.div(X||(X=Object(h.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  border-radius: ","\n    "," ","\n    ",";\n  ",";\n"])),j.a.chatMessagePadding,j.a.chatMessageBg,j.a.chatTextColor,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.messageCloudTaleLeft),wn=function(n){var e=null;try{var t;e=JSON.parse(null===(t=n.msg.sys)||void 0===t?void 0:t.additionalData)}catch(o){console.error("Can't parse bot menu "+o)}if(!e)return Object(v.jsx)("div",{children:"NO BOT MENU"});var a=Object(v.jsx)(yn,{children:e.menu.title}),r=null,i=0;return e&&Array.isArray(e.menu.items)&&(r=e.menu.items.map((function(e){return Object(v.jsx)(Mn,{data:e,userUID:n.msg.user_uid},i++)}))),Object(v.jsxs)("div",{children:[a,Object(v.jsx)(Sn,{children:r})]})},Cn=m.a.div(K||(K=Object(h.a)(["\n  background-color: rgba(0, 0, 0, 0.15);\n  width: 100%;\n  max-width: 400px;\n  padding-top: 75%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border-radius: 6px;\n  cursor: pointer;\n  &:hover {\n    background-position: contain;\n  }\n"]))),In=Object(x.memo)((function(n){var e,t=null===(e=n.msg.sys)||void 0===e?void 0:e.additionalData.split(","),a=t[0],r=Object(x.useState)(null),i=Object(O.a)(r,2),o=i[0],s=i[1];return Object(x.useEffect)((function(){return f.a.S_IMAGE_REQUEST.invoke({uid:a,thumb:!0,chatUID:n.msg.chatUID}),f.a.S_IMAGE_READY.add((function(n){n.uid===a&&n.thumb&&s(n.b64)}),a),function(){f.a.S_IMAGE_READY.clearContext(a)}}),[a,n.msg.chatUID]),Object(v.jsx)(Cn,{onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&f.a.S_IMAGE_DOWNLOAD_REQUEST.invoke({target:"msg",src:e.target,uid:a,name:n.msg.sys.title,chatUID:n.msg.chatUID,width:t[1],height:t[2]})},style:{backgroundImage:"url(".concat(o)}})})),En=m.a.div(Y||(Y=Object(h.a)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: ",';\n  display: flex;\n  align-items: center;\n  max-width: calc(100% - 20px);\n  cursor: pointer;\n  &::before {\n    content: "";\n    display: block;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAeklEQVRIie2UwRGAIAwEL45t2I+VUIdP65RCzo9+IEKIo+M47BPusvAJ8DtIziQj6yxewWYY7pecTUvmYH1a0CZxCuySGwJVIloZAEQku0szGmlvLL3UOqQkHTyCFrqgC7rgBYG2KiKAqbbwLojpgfaDoAWNw4Oj93F2ysfj8659GAAAAAAASUVORK5CYII=);\n    width: 30px;\n    height: 30px;\n    min-width: 30px;\n    min-height: 30px;\n    background-color: ',";\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 80%;\n    border-radius: 8px;\n    box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.5);\n    margin-right: 10px;\n  }\n  &::after {\n    content: attr(data-title);\n    display: block;\n    flex-grow: 1;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"])),j.a.chatMessageFileMsgBg,j.a.chatMessageBorderRadius,j.a.chatMessageFileItemBg),kn=function(n){var e;return Object(v.jsx)(En,{"data-title":null===(e=n.msg.sys)||void 0===e?void 0:e.title,onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&f.a.S_FILE_DOWNLOAD_REQUEST.invoke({uid:n.msg.sys.additionalData,name:n.msg.sys.title})}})},Dn=m.a.div(W||(W=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n"]))),Rn=null,Tn=[],Bn=new Map,Hn=[],Un=new Map;f.a.S_CHAT_OPENING.add((function(n){Tn=n.users.map((function(n){return n.uid})),n.users.map((function(n){return Bn.set(n.uid,n.name)})),Un=new Map})),f.a.S_CHAT_OPEN_REQUEST.add((function(n){n.chatUID&&(Rn=n.chatUID)}));var zn,Gn,Ln,Nn,Jn,_n,Pn,Qn,Fn=m.a.div(q||(q=Object(h.a)(["\n  word-wrap: break-word;\n  word-break: break-word;\n  background-color: ",";\n  color: ",';\n  flex-direction: column;\n  &[data-mine="true"] {\n    background-color: ',";\n    color: ",';\n  }\n  &[data-mine="false"] div[data-type="link"] {\n    background-color: ',";\n    color: ",";\n  }\n  align-self: flex-end;\n  padding: 15px 0 15px 0;\n  border-radius: ",';\n  &[data-full-width="true"] {\n    width: calc(100% - 50px);\n  }\n  &[data-status="plus"] {\n    background-color: #4caf50;\n    color: white;\n  }\n  &[data-status="minus"] {\n    background-color: #ce3f44;\n    color: white;\n  }\n'])),j.a.chatMessageBg,j.a.chatTextColor,j.a.chatMessageBgLeft,j.a.chatMineTextColor,j.a.linkBGColorRight,j.a.linkColorRight,j.a.chatMessageBorderRadius),Zn=m.a.div($||($=Object(h.a)(["\n  position: absolute;\n  bottom: 1px;\n  left: -45px;\n"]))),Vn=m.a.div(nn||(nn=Object(h.a)(["\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Xn=Object(m.a)(Vn)(en||(en=Object(h.a)(["\n  background-color: ",";\n  color: ",";\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 3px;\n  margin: ",";\n  box-sizing: border-box;\n  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.2);\n  border: 1px dashed #2196f3;\n  transition: background-color 0.2s;\n  &:hover {\n    text-decoration: underline;\n    background-color: ",";\n  }\n"])),j.a.linkBGColor,j.a.linkColor,j.a.chatMessagePadding,j.a.linkBGColorHover),Kn=m.a.video(tn||(tn=Object(h.a)(["\n  width: 100%;\n  max-width: 434px;\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n  margin: ",";\n"])),j.a.chatMessagePadding),Yn=Object(m.a)(Vn)(an||(an=Object(h.a)(["\n  background-color: #0f2a38;\n  max-height: 60vh;\n  overflow: auto;\n  white-space: pre;\n  padding: 10px;\n  font-family: monospace;\n  font-size: 13px;\n  color: #3bffd1;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: ",";\n"])),j.a.chatMessagePadding),Wn=m.a.div(rn||(rn=Object(h.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 1px;\n  &::before {\n    content: attr(data-line);\n    display: block;\n    width: 25px;\n    min-width: 25px;\n    background-color: rgba(0, 0, 0, 0.2);\n    border-right: 1px solid rgba(0, 0, 0, 0.6);\n    margin-right: 8px;\n    padding: 3px;\n    color: rgba(255, 255, 255, 0.5);\n  }\n"]))),qn=Object(m.a)(Vn)(on||(on=Object(h.a)(["\n  margin: 0 15px 0 15px;\n"]))),$n=function(n){var e=n.data,t=e.content,a=e.type;if("link"===a){var r=document.createElement("a");r.href=t,r.target="_blank",r.style.display="absoulte";var i=function(n){document.body.appendChild(r),r.click(),r.remove()},o=t;return o.length>40&&(o=(o=t.substr(0,15)+"..."+t.substr(15)).substr(0,35)),t.toLowerCase().endsWith(".mp4")?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Kn,{controls:!0,src:t,children:Object(v.jsx)("source",{src:t,type:"video/mp4"})}),Object(v.jsx)(Xn,{"data-type":"link",onClick:i,children:t})]}):Object(v.jsx)(Xn,{"data-type":"link",onClick:i,children:t})}if("code"===a){var s=t.split("\n"),c=1,d=s.map((function(n){return Object(v.jsx)(Wn,{"data-line":c,children:n},c++)}));return Object(v.jsx)(Yn,{"data-type":"code",children:d})}return Object(v.jsx)(qn,{children:t})},ne=Object(x.memo)((function(n){var e=n.msg,t=e.text,a=e.mine,r="%{blck#$}",i=[],o=!1,s=(t=t.replace(/(\b((https:\/\/)|(http:\/\/)|(ftp:\/\/)|(www\.))((.*?)[^\s\n\t\r\v]*))|\n|{code}([\w\W]+?){code}|{code}([\w\W]+?){\/code}/gim,(function(n,e){return"\n"===n?(i.push({type:"br",content:""}),r):n.toLowerCase().startsWith("{code}")?(i.push({type:"code",content:n.substr(6,n.length-12)}),o=!0,r):(i.push({type:"link",content:n}),r)}))).split(r),c=[];for(var d in s){var u=s[d];u.length>0&&c.push({type:"text",content:u});var l=i[d];l&&c.push(l)}var p=0,g=c.map((function(n){return Object(v.jsx)($n,{data:n},p++)})),b=null;return"+"===t&&(b="plus"),"-"===t&&(b="minus"),Object(v.jsx)(Fn,{"data-status":b,"data-full-width":o,"data-mine":a,"data-type":"message",children:g})})),ee=m.a.div(sn||(sn=Object(h.a)(["\n  width: 88%;\n  max-width: 88%;\n  position: relative;\n  align-self: flex-start;\n  align-items: center;\n  display: flex;\n  color: ",';\n  &[data-mine="true"] {\n    justify-content: flex-end;\n    align-self: flex-end;\n    color: ',';\n  }\n  &[data-mine="false"] {\n    flex-direction: row-reverse;\n    justify-content: flex-end;\n    margin-left: 50px;\n  }\n\n  &[data-mine="true"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n  &[data-mine="false"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n\n  &[data-mine="true"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-mine="false"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-position="middle"],\n  &[data-position="first"],\n  &[data-position="last"] {\n    margin-bottom: 1px;\n  }\n  &[data-position="standalone"],\n  &[data-position="last"] {\n    margin-bottom: 30px;\n  }\n  &:hover > div[data-type="time"] {\n    opacity: 1;\n    transition: opacity 0.2s;\n  }\n'])),j.a.chatMessageColorLeft,j.a.chatMessageColorRight,j.a.messageCloudTaleRight,j.a.messageCloudTaleLeft,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageSmallBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius,j.a.chatMessageBorderRadius),te=m.a.div(cn||(cn=Object(h.a)(["\n  font-size: 10px;\n  white-space: nowrap;\n  color: ",";\n  opacity: 0;\n  margin: 0 10px 0 10px;\n  transition: opacity 0.2s 5s;\n  user-select: none;\n  pointer-events: none;\n  /* background-color: #213346b7;\n    padding:3px 7px 3px 7px;\n    border-radius:9px;\n    color:white;*/\n"])),j.a.chatMessageTimeColor),ae=m.a.div(dn||(dn=Object(h.a)(["\n  font-size: 11px;\n  position: absolute;\n  top: -16px;\n  color: ",";\n"])),j.a.chatMessageAuthorColor),re=m.a.div(un||(un=Object(h.a)(["\n  /*background-color: #213346b7;*/\n  background-color: #5a6979;\n  padding: 5px 15px 5px 15px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 1);\n  white-space: nowrap;\n  border-radius: 10px;\n  margin: 0px 0 25px 0;\n  text-align: center;\n  width: 120px;\n  align-self: center;\n  position: sticky;\n  z-index: 10;\n  top: 10px;\n"]))),ie=function(n){var e=gn.a.dateFormatter.format(n.message.created,"%h:%i");return Object(v.jsx)(te,{"data-type":"time",children:e})},oe=function(n){var e,t=n.message,a=null;t.sys&&("botMenu"===t.type&&(a=Object(v.jsx)(wn,{data:t.sys,msg:t})),"botCommand"===t.type&&(a=Object(v.jsx)(On,{msg:t})),"img"===t.type&&(a=Object(v.jsx)(In,{msg:t})),"file"===t.type&&(a=Object(v.jsx)(kn,{msg:t})),null==a&&(t.text=null===(e=t.sys)||void 0===e?void 0:e.title),t.text||(t.text="System msg ".concat(t.sys.method," without title")));var r=null;t.date&&(r=Object(v.jsx)(re,{children:t.date}));var i=null,o=null;t.mine||"first"!==t.position&&"standalone"!==t.position||(i=Object(v.jsx)(ae,{children:t.user_name})),t.mine||"last"!==t.position&&"standalone"!==t.position||(o=Object(v.jsx)(Zn,{children:Object(v.jsx)(bn.a,{user:t.user_uid,avatar:t.user_avatar})})),null==a&&(a=Object(v.jsx)(ne,{msg:t}));var s=Hn.filter((function(n){return n?n>=t.id:null})).length,c=Math.max.apply(Math,Object(pn.a)(Hn)),d=[];return Un.forEach((function(n,e){var a,r=null===(a=Un.get(e))||void 0===a?void 0:a.lastReadMsgID;if(r&&r>=t.id){var i=Bn.get(e);i&&d.push(i)}})),Object(v.jsxs)(v.Fragment,{children:[r,Object(v.jsxs)(ee,{"data-position":t.position,"data-mine":t.mine,onClick:function(e){e.shiftKey&&console.log(n.message)},children:[Object(v.jsx)(ie,{message:t}),i,t.mine&&s&&s!==Tn.length&&Object(v.jsx)(fn,{total:Tn.length,progress:s,chipText:"Read by: ".concat(d.join(", "))})||null,t.mine&&s&&s===Tn.length&&c===t.id&&Object(v.jsx)(xn,{status:"read"})||null,t.mine&&!s&&Object(v.jsx)(xn,{status:"delivered"}),a,o]})]})},se=function(){var n=Object(x.useState)([]),e=Object(O.a)(n,2),t=e[0],a=e[1];Hn=Tn.map((function(n){var e;return(null===(e=Un.get(n))||void 0===e?void 0:e.lastReadMsgID)||0})),Object(x.useEffect)((function(){return f.a.S_CHAT_MESSAGES.add((function(n){Rn===n.chatUID&&a(Object(pn.a)(n.msgs))}),"ChatMessages"),f.a.S_CHAT_STATUS_READ.add((function(){Rn&&f.a.REQ_LAST_READ_MSG.invoke({chatUID:Rn}).then((function(n){n&&(Un=n)}))}),"ChatMessages"),f.a.S_GUI_MESSAGES_RENDERED.invoke(),function(){f.a.S_CHAT_MESSAGES.clearContext("ChatMessages"),f.a.S_CHAT_STATUS_READ.clearContext("ChatMessages")}}));var r=null,i=0;return t&&t.length>0&&(r=t.map((function(n,e){return Object(v.jsx)(oe,{message:n},i++)}))),Object(v.jsx)(Dn,{children:r})},ce=t(27),de=t(22),ue=t(26),le=m.a.div(zn||(zn=Object(h.a)(["\n    font-size:20px;\n    position: absolute;\n    top:66px;\n    right:8px;\n    user-select:none;\n    pointer-events: none;\n    display:flex;\n    width:100%;\n    flex-direction: column;\n    align-items: flex-end;\n    z-index:30;\n"]))),pe=m.a.div(Gn||(Gn=Object(h.a)(['\n    padding:5px 10px 5px 10px;\n    font-size:11px;\n    background-color:rgba(0,0,0,.7);\n    color:white;\n    border-radius: 10px;\n    max-width: 50%;\n    overflow:hidden;\n    text-overflow: ellipsis;\n    white-space:nowrap;\n    margin-bottom: 2px;\n    box-shadow:0px 1px 2px rgba(0,0,0,.3);\n    &[data-status="finish"]{\n        background-color: #3b548e;\n    }\n    &[data-status="fail"]{\n        background-color: #ce3f44;\n    }\n']))),ge=function(n){return Object(v.jsx)(pe,{"data-status":n.data.status,children:n.data.file.name})},be=function(){var n=Object(x.useState)([]),e=Object(O.a)(n,2),t=e[0],a=e[1];Object(x.useEffect)((function(){return f.a.S_FILE_UPLOADING_LIST_UPDATED.add((function(n){a(n)}),"ChatUploadingFiles"),function(){f.a.S_FILE_UPLOADING_LIST_UPDATED.clearContext("ChatUploadingFiles")}}));var r=0,i=t.map((function(n){return Object(v.jsx)(ge,{data:n},r++)}));return Object(v.jsx)(le,{children:i})},he=m.a.div(Ln||(Ln=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.65);\n"]))),xe=m.a.div(Nn||(Nn=Object(h.a)(["\n  width: 80%;\n  max-height: 80%;\n  min-height: 10%;\n  border-radius: 10px;\n  padding: 10px;\n  background-color: white;\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);\n  color: #e91e63;\n  display: flex;\n  font-size: 15px;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  white-space: pre-line;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),Ae=function(){var n=Object(x.useState)(null),e=Object(O.a)(n,2),t=e[0],a=e[1];Object(x.useEffect)((function(){return f.a.S_ALERT_ERROR.add((function(n){f.a.S_LOGE.invoke(n),a(n)}),"alert"),function(){f.a.S_ALERT_ERROR.clearContext("alert")}}));return t?Object(v.jsx)(he,{onClick:function(n){a(null)},children:Object(v.jsx)(xe,{children:t})}):Object(v.jsx)(v.Fragment,{})};ce.a.registerPlugin(ue.a);var me,fe,je,Oe,ve=Object(m.b)(Jn||(Jn=Object(h.a)(["\n    from {\n        transform: translateY(10px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0px);\n        opacity: 1;\n    }\n"]))),Me=m.a.div(_n||(_n=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]))),ye=m.a.div(Pn||(Pn=Object(h.a)(["\n  position: absolute;\n  border-radius: 15px;\n  padding: 5px 10px;\n  background: ",";\n  color: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  animation: "," 0.5s linear;\n  transition: 0.5s ease;\n  min-width: 200px;\n  max-width: 100%;\n  z-index: 11;\n"])),j.a.toastBGColor,j.a.toastTextColor,ve),Se=m.a.div(Qn||(Qn=Object(h.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  width: 15px;\n  height: 15px;\n  min-width: 15px;\n  min-height: 15px;\n  cursor: pointer;\n  background-size: 15px;\n  margin-left: 5px;\n"]))),we=function(n){var e=Object(x.useRef)(null),t=function(t){e.current&&(e.current.getAttribute("active")||de.d.to(e.current,.5,{opacity:0,top:"0px",ease:"ease",onComplete:function(){e.current&&(e.current.style.opacity="1",e.current.style.top="calc(50px + (".concat(n.position," * 35px))"),e.current.setAttribute("active","1")),f.a.S_TOAST_DELETE.invoke(t),f.a.REQ_TOASTS.invoke().then((function(e){return n.setToasts(e)}))}}),e.current.getAttribute("active")&&e.current.removeAttribute("active"))};return n.deletedToast===n.toast.tempUID&&t(n.toast.tempUID),Object(v.jsxs)(ye,{style:{top:"calc(50px + (".concat(n.position," * 35px))")},ref:e,children:[n.toast.text,Object(v.jsx)(Se,{onClick:function(){return t(n.toast.tempUID)}})]})},Ce=function(){var n=Object(x.useState)([]),e=Object(O.a)(n,2),t=e[0],a=e[1],r=Object(x.useState)(null),i=Object(O.a)(r,2),o=i[0],s=i[1];return Object(x.useEffect)((function(){return f.a.S_TOAST.add((function(){f.a.REQ_TOASTS.invoke().then((function(n){return a(n)}))}),"toast"),f.a.S_TOAST_DELETE.add((function(n){s(n)}),"toast"),function(){f.a.S_TOAST.clearContext("toast"),f.a.S_TOAST_DELETE.clearContext("toast")}}),[]),Object(v.jsx)(Me,{children:t.length>0&&t.map((function(n,e){return Object(v.jsx)(we,{toast:n,position:e,deletedToast:o,setToasts:a},n.state+e)}))})};ce.a.registerPlugin(ue.a);var Ie=25,Ee=25,ke="320px",De="60vh",Re=m.a.div(me||(me=Object(h.a)(["\n  bottom: ","px;\n  right: ","px;\n"])),Ee,Ie),Te=Object(m.a)(Re)(fe||(fe=Object(h.a)(['\n  display: flex;\n  font-family: "Open Sans", sans-serif;\n  flex-direction: column;\n  position: absolute;\n  width: ',";\n  height: ",";\n  background-color: ",";\n  border-radius: 30px;\n  overflow: hidden;\n  font-size: ",';\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);\n  transition: height 0.2s, width 0.2s;\n  line-height: normal !important;\n  transform: scaleZ(1);\n  &[data-mobile="true"] {\n    position: relative;\n    bottom: auto;\n    right: auto;\n    left: 0;\n    top: 0;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    width: 100vw;\n    height: 100vh;\n    box-shadow: none;\n  }\n\n  &[data-messenger="true"] {\n    position: relative;\n    height: auto;\n    bottom: auto;\n    right: auto;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    max-width: 600px;\n    box-shadow: none;\n  }\n'])),ke,De,j.a.chatBG,j.a.chatMessageTextSize),Be=m.a.div(je||(je=Object(h.a)(["\n  flex-grow: 1;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: auto;\n  width: calc(100% - 5px);\n"]))),He=m.a.div(Oe||(Oe=Object(h.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n"]))),Ue=null;e.default=function(n){var e=0,t=0,a=0,r=0,i=Object(x.useRef)(null),o=Object(x.useRef)(null),s=function(n){if(i.current){var o=a-(n.clientX-e),s=r-(n.clientY-t);i.current.style.bottom=s+"px",i.current.style.right=o+"px",c()}},c=function(){if(i.current){var n=i.current.getBoundingClientRect(),e=parseInt(i.current.style.right),t=parseInt(i.current.style.bottom);if(!isNaN(e)&&!isNaN(t)){e<Ie&&(e=Ie),t<Ee&&(t=Ee);var a=window.innerWidth-n.width,r=window.innerHeight-n.height;e>a&&(e=a),t>r&&(t=r),i.current.style.bottom=t+"px",i.current.style.right=e+"px"}}},d=function(n){c()},u=function(n){s(n)},l=function n(e){s(e),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",n)},p=function(){i.current&&(Ue&&Ue.kill(),i.current.setAttribute("opening","1"),i.current.removeAttribute("expanded"),i.current.style.opacity="0",i.current.style.removeProperty("display"),Ue=de.d.to(i.current,.2,{width:ke,height:De,bottom:Ee+"px",right:Ie+"px",opacity:1,ease:de.c.easeIn,onComplete:function(){i.current&&i.current.removeAttribute("opening"),f.a.S_GUI_CHAT_OPENED.invoke()}}))};Object(x.useEffect)((function(){f.a.S_GUI_MESSAGES_RENDERED.add((function(){o.current&&(o.current.scrollTop=o.current.scrollHeight-o.current.clientHeight),i.current&&"none"===i.current.style.display&&p()}),"chat");var e=window.__DCCSharedObject;return e&&!n.sharedObject.messenger&&i.current&&(n.sharedObject.mobile||(i.current.style.right=Ie+"px",i.current.style.bottom=Ee+"px",e.bottomOffset&&!isNaN(e.bottomOffset)&&(Ee=e.bottomOffset),e.rightOffset&&!isNaN(e.rightOffset)&&(Ie=e.rightOffset)),c()),f.a.S_GUI_CLOSE_CHAT.add((function(n){i.current&&(Ue&&Ue.kill(),i.current.setAttribute("closing","1"),i.current.removeAttribute("expanded"),Ue=de.d.to(i.current,.2,{width:0,height:0,bottom:Ee+"px",right:Ie+"px",opacity:0,ease:de.c.easeIn,onComplete:function(){i.current&&(i.current.style.display="none",i.current.removeAttribute("closing")),f.a.S_GUI_CHAT_CLOSED.invoke()}}))}),"chat"),f.a.S_GUI_OPEN_CHAT.add((function(){p()}),"chat"),n.sharedObject.messenger||window.addEventListener("resize",d),function(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",l),window.removeEventListener("resize",d),f.a.S_GUI_MESSAGES_RENDERED.clearContext("chat"),f.a.S_GUI_CLOSE_CHAT.clearContext("chat"),f.a.S_GUI_OPEN_CHAT.clearContext("chat"),f.a.S_GUI_REPOSITION_CHAT.clearContext("chat"),Ue&&Ue.kill()}}));var g=function(n){n.preventDefault();for(var e=[],t=n.dataTransfer.files.length,a=0;a<t;a++){var r=n.dataTransfer.files.item(a);r&&e.push(r)}f.a.S_CHAT_ATTACH_FILE_REQUEST.invoke(e)},b=function(n){n.preventDefault()},h=n.sharedObject.headless?null:Object(v.jsx)(R,{messenger:n.sharedObject.messenger,onDoubleClick:function(e){i.current&&(i.current.getAttribute("closing")||n.sharedObject.messenger||n.sharedObject.mobile||(i.current.getAttribute("expanded")?(Ue=de.d.to(i.current,.2,{width:320,height:"50vh",bottom:Ee+"px",right:Ie+"px",ease:de.c.easeOut}),i.current.removeAttribute("expanded")):(Ue=de.d.to(i.current,.2,{width:390,height:"calc(95vh - ".concat(Ee,"px)"),bottom:Ee+"px",right:Ie+"px",ease:de.c.easeOut}),i.current.setAttribute("expanded","1"))))}});return n.sharedObject.messenger?Object(v.jsxs)(Te,{id:"DukascopyConnect","data-messenger":n.sharedObject.messenger,ref:i,children:[h,Object(v.jsx)(Be,{ref:o,onDrop:g,onDragOver:b,children:Object(v.jsx)(He,{children:Object(v.jsx)(se,{})})}),Object(v.jsx)(be,{}),Object(v.jsx)(ln,{messenger:n.sharedObject.messenger}),Object(v.jsx)(Ce,{}),Object(v.jsx)(Ae,{})]}):Object(v.jsxs)(Te,{id:"DukascopyConnect","data-mobile":n.sharedObject.mobile,ref:i,onMouseDown:function(o){if(!n.sharedObject.mobile&&i.current&&"chatHead"===o.target.id){e=o.clientX,t=o.clientY;var s=i.current.getBoundingClientRect();a=s.left,r=s.top,a=parseInt(i.current.style.right),r=parseInt(i.current.style.bottom),isNaN(a)&&(a=Ie,i.current.style.right=a+"px"),isNaN(r)&&(r=Ee,i.current.style.bottom=r+"px"),window.addEventListener("mousemove",u),window.addEventListener("mouseup",l)}},children:[h,Object(v.jsx)(Be,{ref:o,onDrop:g,onDragOver:b,children:Object(v.jsx)(He,{children:Object(v.jsx)(se,{})})}),Object(v.jsx)(be,{}),Object(v.jsx)(ln,{}),Object(v.jsx)(Ae,{})]})}}}]);