(this["webpackJsonpsupport-chat-widget"]=this["webpackJsonpsupport-chat-widget"]||[]).push([[1],{26:function(n,e,t){"use strict";var a,r=t(23),o=(t(12),t(24)),i=t(8),c=o.a.div(a||(a=Object(r.a)(["\n    width:30px;\n    height:30px;\n    min-width:30px;\n    min-height:30px;\n    border-radius: 40%;\n    background-color: #a2a786;\n    background-size: cover;\n    background-position: center;\n    background-repeat:no-repeat;\n    &[data-dukascopy]{\n        background-size:80%;\n        background-color:#da2221;\n        background-image:url(data:image/png;base64,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);\n    }\n"])));e.a=function(n){var e=n.avatar;return Object(i.jsx)(c,{"data-dukascopy":"dukascopy"===e})}},39:function(n,e,t){"use strict";t.r(e);var a,r,o,i,c,s,d,l,u,p,g,b=t(23),x=t(12),h=t(24),f=t(0),A=t(13),m=t(25),j=t(8),O=h.a.div(a||(a=Object(b.a)(["\n  position: relative;\n  background-color: ",";\n  color: ",';\n  font-family: "Open Sans", sans-serif;\n  font-style: normal;\n  font-weight: 700;\n  padding: 15px 30px;\n  cursor: pointer;\n  text-transform: uppercase;\n  letter-spacing: 0.02em;\n  font-size: 22px;\n  line-height: 30px;\n  &[data-uid]::after {\n    content: attr(data-uid);\n    display: block;\n    font-size: 12px;\n    opacity: 0.4;\n    line-height: 14px;\n    font-family: "SF Pro Display";\n    font-weight: 400;\n  }\n  &[data-status="0"]::before {\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  &[data-status="1"]::before {\n    background-color: #ff9009e1;\n  }\n  &[data-status="2"]::before {\n    background-color: #15ff09e0;\n  }\n'])),A.a.chatColor,A.a.chatHeadColor),v=h.a.div(r||(r=Object(b.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  position: absolute;\n  right: 30px;\n  width: 20px;\n  height: 20px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  top: calc(50% - 10px);\n"]))),E=function(n){var e=Object(x.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1],o=Object(x.useState)(0),i=Object(m.a)(o,2),c=i[0],s=i[1];Object(x.useEffect)((function(){return f.a.S_CHAT_OPENED.add((function(n){r(n)}),"ChatHead"),f.a.S_WS_AUTHORIZED.add((function(n){s("guest"===n?1:2)}),"ChatHead"),f.a.S_WS_CLOSED.add((function(){s(0)}),"ChatHead"),function(){f.a.S_CHAT_OPENED.clearContext("ChatHead"),f.a.S_WS_AUTHORIZED.clearContext("ChatHead"),f.a.S_WS_CLOSED.clearContext("ChatHead")}}));var d="Loading...";null!=a&&(d=a.title);var l=null;if(null!=a&&n.messenger&&"private"===a.type){l=Object(j.jsx)("div",{onClick:function(n){f.a.S_REQUEST_CALL.invoke({chatVO:a,audio:!0,video:!0})},children:"CALL"})}var u=n.messenger?null:Object(j.jsx)(v,{onClick:function(n){f.a.S_LOG.invoke("on close button click"),f.a.S_GUI_CLOSE_CHAT.invoke({uid:null===a||void 0===a?void 0:a.uid})}});return Object(j.jsxs)(O,{onDoubleClick:n.onDoubleClick,id:"chatHead","data-status":c,"data-uid":a?null===a||void 0===a?void 0:a.uid:"...",children:[d,u,l]})},I=t(6),M=h.a.div(o||(o=Object(b.a)(["\n  display: flex;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 13px 15px 18px 15px;\n  background-color: ",";\n  align-items: center;\n"])),A.a.chatColor),S=null,y=h.a.button(i||(i=Object(b.a)(["\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  align-self: center;\n  border: none;\n  background: none;\n"]))),C=Object(h.a)(y)(c||(c=Object(b.a)(["\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTEuMjUiIHN0cm9rZT0iI0M4RDBEQiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggZD0iTTEyIDVWMTlNNSAxMkgxOSIgc3Ryb2tlPSIjQzhEMERCIiBzdHJva2Utd2lkdGg9IjEuNSIvPgo8L3N2Zz4K);\n"]))),w=Object(h.a)(y)(s||(s=Object(b.a)(["\n  border-radius: 50%;\n  background-size: 60%;\n  background-color: ",";\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjMiIHZpZXdCb3g9IjAgMCAyNCAyMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuMDgyMzEgOS45NjQyNkMxLjI5MyA5Ljc1MjE0IDAuODMzMzk0IDguOTcxMjIgMS4wNTYyIDguMjE4ODRDMS4xODkwOSA3Ljc2ODkzIDEuNTQ3NzcgNy40MTAzNCAyLjAxMzM3IDcuMjYxOTVMMjIuMDY3IDEuMDM1NTNDMjIuNDYwNiAwLjkxMjgyMyAyMi44ODQzIDEuMTE4MjggMjMuMDEzMiAxLjQ5MzA0QzIzLjA2MjEgMS42MzU3MiAyMy4wNjIxIDEuNzg5ODEgMjMuMDE0MiAxLjkzMjQ5TDE2LjQ3ODggMjEuMDMzMUMxNi4yMiAyMS43NzQxIDE1LjM3ODggMjIuMTczNiAxNC42MDA1IDIxLjkyNzNDMTQuMTMyOSAyMS43Nzg5IDEzLjc3MjIgMjEuNDE4NCAxMy42NDAzIDIwLjk2NjZMMTEuMzk2MiAxMi4wOTExTDIuMDgyMzEgOS45NjQyNloiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTIyLjgyOTYgMS4yMDcwM0wxMS4zOTY1IDEyLjA5MTQiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==);\n  width: 42px;\n  height: 42px;\n  min-width: 42px;\n  min-height: 42px;\n  background-position: 7px 10px;\n  background-repeat: no-repeat;\n"])),A.a.chatSendBtnBg),k=h.a.div(d||(d=Object(b.a)(["\n  flex-grow: 1;\n  max-height: 200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  color: ",';\n  font-size: 15px;\n  line-height: 18px;\n  &:focus {\n    outline: none;\n  }\n  margin: 4px 10px 4px 10px;\n  &[data-prompt="true"] {\n    opacity: 0.7;\n    color: #fff;\n  }\n'])),A.a.chatInputColor),D=h.a.div(l||(l=Object(b.a)(["\n  width: 100%;\n  display: flex;\n  margin: 0px 10px;\n  overflow-x: auto;\n"]))),R=h.a.div(u||(u=Object(b.a)(["\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  cursor: pointer;\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: 3px 3px;\n  border-radius: 50%;\n  background-color: #a5201c;\n  margin-right: 5px;\n  border: 1px solid #fff;\n"]))),T=h.a.div(p||(p=Object(b.a)(["\n  width: 80px;\n  height: 80px;\n  min-width: 80px;\n  min-height: 80px;\n  border-radius: 15px;\n  margin: 2.5px 5px;\n  position: relative;\n  background-size: cover;\n  background-position: center;\n  background-color: #3b548d;\n  word-break: break-all;\n  font-size: 12px;\n  text-align: center;\n  padding: 0px 5px;\n  padding-top: 50px;\n  overflow: hidden;\n  color: #fff;\n"]))),B=h.a.div(g||(g=Object(b.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  width: 15px;\n  height: 15px;\n  border-radius: 50%;\n  color: #fff;\n  cursor: pointer;\n  line-height: 0px;\n  font-size: 15px;\n  font-weight: bold;\n  padding-top: 6px;\n  background: rgba(0, 0, 0, 0.5);\n"]))),_=function(n){var e=Object(x.useState)(null),t=Object(m.a)(e,2),a=t[0],r=t[1];!function(n){var e=new FileReader;e.readAsDataURL(n),e.onload=function(){r(e.result)},e.onerror=function(n){console.error("Error: ",n)}}(n.fileVo.file);return Object(j.jsxs)(T,{style:{backgroundImage:"url(".concat(a)},children:[!function(n){var e;return n&&null!=(null===n||void 0===n||null===(e=n.toString())||void 0===e?void 0:e.match(/(jpeg|jpg|gif|png);base64/))}(a)&&n.fileVo.file.name,Object(j.jsx)(B,{onClick:function(){f.a.S_FILE_PREVIEW_DELETE.invoke(n.fileVo.tempUID)},children:"x"})]})},G=!1,H="Type your message...";f.a.S_SHARED_OBJECT_READY.add((function(n){n.promptMessage&&"string"===typeof n.promptMessage&&(H=n.promptMessage)}));var L,z,N,U,P,J,F,Q,Y,Z,V,W,K,X,q,$,nn,en,tn,an=function(n){var e=Object(x.useRef)(null),t=Object(x.useRef)(null),a=Object(x.useState)(null),r=Object(m.a)(a,2),o=r[0],i=r[1],c=Object(x.useState)(null),s=Object(m.a)(c,2),d=s[0],l=s[1],u=function(n){f.a.REQ_FILE_PREVIEW_GET_BY_UID.invoke(n).then((function(n){return i(n?Array.from(n.values()):null)}))};Object(x.useEffect)((function(){var n=e.current;return n&&n.addEventListener("paste",p),f.a.S_CHAT_OPENED.add((function(n){l(n),u(n.uid)}),"chatInput"),d&&f.a.S_FILE_PREVIEW_ATTACH.add((function(){u(d.uid)}),"chatInput")&&f.a.S_FILE_PREVIEW_DELETE.add((function(){u(d.uid)}),"chatInput")&&f.a.S_FILE_PREVIEW_DELETE_ALL.add((function(){i(null)}),"chatInput"),function(){n&&n.removeEventListener("paste",p),f.a.S_AUTH_ERROR.clearContext("chatInput"),f.a.S_CHAT_OPENED.clearContext("chatInput"),f.a.S_FILE_PREVIEW_ATTACH.clearContext("chatInput"),f.a.S_FILE_PREVIEW_DELETE.clearContext("chatInput"),f.a.S_FILE_PREVIEW_DELETE_ALL.clearContext("chatInput")}}));var p=function(n){if(e.current){var t=n;if(t&&t.clipboardData){var a,r=!1,o=Object(I.a)(t.clipboardData.items);try{for(o.s();!(a=o.n()).done;){var i=a.value;if("file"===i.kind){var c=i.getAsFile();c&&f.a.S_FILE_PREVIEW_ATTACH.invoke([c])}-1===i.type.indexOf("text/rtf")&&-1===i.type.indexOf("editor")||(r=!0)}}catch(l){o.e(l)}finally{o.f()}var s=n.clipboardData.getData("text");r&&(s="{code}"+s+"{code}"),G=!0;var d=window.getSelection();d&&d.rangeCount&&(S||(S=document.createElement("div")),S.textContent=s,s=S.textContent,d.deleteFromDocument(),d.getRangeAt(0).insertNode(document.createTextNode(s)),n.preventDefault())}}},g=function(){if(o&&o.length>0&&d)return f.a.S_CHAT_FILE_SEND_REQUEST.invoke(d.uid),void(G=!1);if(e.current){var n=e.current.innerHTML;if(n){n=(n=(n=(n=n.replace("\t","TAB")).replaceAll("<br>","\n")).replaceAll("<div>","")).replaceAll("</div>","\n"),e.current.textContent=n,n=e.current.textContent;var t={"&nbsp;":"","&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};for(var a in t)n=n.replaceAll(a,t[a]);n?G?n.length>2e3?f.a.S_ALERT_ERROR.invoke("Message too big!"):(G=!1,e.current.textContent="",e.current.focus(),f.a.S_CHAT_MESSAGE_SEND_REQUEST.invoke(n)):f.a.S_LOGE.invoke("Input wasn't changed"):f.a.S_LOGE.invoke("No text to send")}}};return console.log(G),Object(j.jsxs)(M,{children:[Object(j.jsx)(C,{onClick:function(n){t.current&&t.current.click()},disabled:!(10!==(null===o||void 0===o?void 0:o.length))}),o&&o.length>0?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(D,{children:o.map((function(n,e){return Object(j.jsx)(_,{fileVo:n},e)}))}),Object(j.jsx)(R,{onClick:function(){d&&f.a.S_FILE_PREVIEW_DELETE_ALL.invoke(null===d||void 0===d?void 0:d.uid)}})]}):Object(j.jsx)(k,{ref:e,onFocus:function(n){e.current&&(G||(e.current.removeAttribute("data-prompt"),e.current.textContent=""))},"data-prompt":!0,onBlur:function(n){e.current&&(e.current.textContent&&0===e.current.textContent.length&&(G=!1),G||(e.current.textContent=H,e.current.setAttribute("data-prompt","true")))},onKeyUp:function(n){e.current&&("Enter"!==n.code||n.altKey||n.ctrlKey||n.shiftKey||(n.preventDefault(),g()),G=!!(e.current.textContent&&e.current.textContent.length>0))},contentEditable:!0,suppressContentEditableWarning:!0,children:H}),Object(j.jsx)(w,{onClick:function(n){g()}}),Object(j.jsx)("input",{ref:t,multiple:!0,style:{display:"none"},type:"file",onChange:function(n){var e=n.target.files;if(e){for(var t=[],a=e.length,r=0;r<a;r++){var o=e.item(r);o&&t.push(o)}a>10?alert("You can select up to 10 files"):(f.a.S_FILE_PREVIEW_ATTACH.invoke(t),n.target.value="")}},onPaste:p})]})},rn=t(28),on=t(5),cn=t(26),sn=h.a.div(L||(L=Object(b.a)(["\n  background-color: ",";\n  padding: ",";\n  border-radius: ",";\n"])),A.a.chatMessageBotItemBg,A.a.chatMessagePadding,A.a.chatMessageBorderRadius),dn=function(n){var e;return Object(j.jsx)(sn,{"data-type":"message",children:null===(e=n.msg.sys)||void 0===e?void 0:e.title})},ln=h.a.div(z||(z=Object(b.a)(["\n  cursor: pointer;\n  color: ",";\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 9px 0 9px 0;\n  &:first-child {\n    border-top: none;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"])),A.a.chatMessageBotMenuColor),un=function(n){var e=n.data,t=e.text,a=e.action;return Object(j.jsx)(ln,{onClick:function(e){f.a.S_CHAT_BOT_COMMAND_SEND_REQUEST.invoke({action:a,title:t,actionData:null,botUID:n.userUID})},children:t})},pn=h.a.div(N||(N=Object(b.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  margin-bottom: 2px;\n  border-radius: "," ","\n    "," ",";\n  &:nth-last-child() {\n    background-color: green;\n  }\n"])),A.a.chatMessagePadding,A.a.chatMessageBg,A.a.chatTextColor,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius),gn=h.a.div(U||(U=Object(b.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  border-radius: ","\n    "," ","\n    ",";\n  ",";\n"])),A.a.chatMessagePadding,A.a.chatMessageBg,A.a.chatTextColor,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.messageCloudTaleLeft),bn=function(n){var e=null;try{var t;e=JSON.parse(null===(t=n.msg.sys)||void 0===t?void 0:t.additionalData)}catch(i){console.error("Can't parse bot menu "+i)}if(!e)return Object(j.jsx)("div",{children:"NO BOT MENU"});var a=Object(j.jsx)(pn,{children:e.menu.title}),r=null,o=0;return e&&Array.isArray(e.menu.items)&&(r=e.menu.items.map((function(e){return Object(j.jsx)(un,{data:e,userUID:n.msg.user_uid},o++)}))),Object(j.jsxs)("div",{children:[a,Object(j.jsx)(gn,{children:r})]})},xn=h.a.div(P||(P=Object(b.a)(["\n  background-color: rgba(0, 0, 0, 0.15);\n  width: 100%;\n  max-width: 400px;\n  padding-top: 75%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border-radius: 6px;\n  cursor: pointer;\n  &:hover {\n    background-position: contain;\n  }\n"]))),hn=Object(x.memo)((function(n){var e,t=null===(e=n.msg.sys)||void 0===e?void 0:e.additionalData.split(","),a=t[0],r=Object(x.useState)(null),o=Object(m.a)(r,2),i=o[0],c=o[1];return Object(x.useEffect)((function(){return f.a.S_IMAGE_REQUEST.invoke({uid:a,thumb:!0,chatUID:n.msg.chatUID}),f.a.S_IMAGE_READY.add((function(n){n.uid===a&&n.thumb&&c(n.b64)}),a),function(){f.a.S_IMAGE_READY.clearContext(a)}}),[a,n.msg.chatUID]),Object(j.jsx)(xn,{onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&f.a.S_IMAGE_DOWNLOAD_REQUEST.invoke({target:"msg",src:e.target,uid:a,name:n.msg.sys.title,chatUID:n.msg.chatUID,width:t[1],height:t[2]})},style:{backgroundImage:"url(".concat(i)}})})),fn=h.a.div(J||(J=Object(b.a)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: ",';\n  display: flex;\n  align-items: center;\n  max-width: calc(100% - 20px);\n  cursor: pointer;\n  &::before {\n    content: "";\n    display: block;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAeklEQVRIie2UwRGAIAwEL45t2I+VUIdP65RCzo9+IEKIo+M47BPusvAJ8DtIziQj6yxewWYY7pecTUvmYH1a0CZxCuySGwJVIloZAEQku0szGmlvLL3UOqQkHTyCFrqgC7rgBYG2KiKAqbbwLojpgfaDoAWNw4Oj93F2ysfj8659GAAAAAAASUVORK5CYII=);\n    width: 30px;\n    height: 30px;\n    min-width: 30px;\n    min-height: 30px;\n    background-color: ',";\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 80%;\n    border-radius: 8px;\n    box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.5);\n    margin-right: 10px;\n  }\n  &::after {\n    content: attr(data-title);\n    display: block;\n    flex-grow: 1;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"])),A.a.chatMessageFileMsgBg,A.a.chatMessageBorderRadius,A.a.chatMessageFileItemBg),An=function(n){var e;return Object(j.jsx)(fn,{"data-title":null===(e=n.msg.sys)||void 0===e?void 0:e.title,onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&f.a.S_FILE_DOWNLOAD_REQUEST.invoke({uid:n.msg.sys.additionalData,name:n.msg.sys.title})}})},mn=h.a.div(F||(F=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n"]))),jn=null;f.a.S_CHAT_OPENING.add((function(n){})),f.a.S_CHAT_OPEN_REQUEST.add((function(n){n.chatUID&&(jn=n.chatUID)}));var On,vn,En,In,Mn,Sn,yn,Cn,wn=h.a.div(Q||(Q=Object(b.a)(["\n  word-wrap: break-word;\n  word-break: break-word;\n  background-color: ",";\n  color: ",';\n  flex-direction: column;\n  &[data-mine="true"] {\n    background-color: ',";\n    color: ",';\n  }\n  &[data-mine="false"] div[data-type="link"] {\n    background-color: ',";\n    color: ",";\n  }\n  align-self: flex-end;\n  padding: 15px 0 15px 0;\n  border-radius: ",';\n  &[data-full-width="true"] {\n    width: calc(100% - 50px);\n  }\n'])),A.a.chatMessageBg,A.a.chatTextColor,A.a.chatMessageBgLeft,A.a.chatMineTextColor,A.a.linkBGColorRight,A.a.linkColorRight,A.a.chatMessageBorderRadius),kn=h.a.div(Y||(Y=Object(b.a)(["\n  position: absolute;\n  bottom: 1px;\n  left: -45px;\n"]))),Dn=h.a.div(Z||(Z=Object(b.a)(["\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),Rn=Object(h.a)(Dn)(V||(V=Object(b.a)(["\n  background-color: ",";\n  color: ",";\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 3px;\n  margin: ",";\n  box-sizing: border-box;\n  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.2);\n  border: 1px dashed #2196f3;\n  transition: background-color 0.2s;\n  &:hover {\n    text-decoration: underline;\n    background-color: ",";\n  }\n"])),A.a.linkBGColor,A.a.linkColor,A.a.chatMessagePadding,A.a.linkBGColorHover),Tn=h.a.video(W||(W=Object(b.a)(["\n  width: 100%;\n  max-width: 434px;\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n  margin: ",";\n"])),A.a.chatMessagePadding),Bn=Object(h.a)(Dn)(K||(K=Object(b.a)(["\n  background-color: #0f2a38;\n  max-height: 60vh;\n  overflow: auto;\n  white-space: pre;\n  padding: 10px;\n  font-family: monospace;\n  font-size: 13px;\n  color: #3bffd1;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: ",";\n"])),A.a.chatMessagePadding),_n=h.a.div(X||(X=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 1px;\n  &::before {\n    content: attr(data-line);\n    display: block;\n    width: 25px;\n    min-width: 25px;\n    background-color: rgba(0, 0, 0, 0.2);\n    border-right: 1px solid rgba(0, 0, 0, 0.6);\n    margin-right: 8px;\n    padding: 3px;\n    color: rgba(255, 255, 255, 0.5);\n  }\n"]))),Gn=Object(h.a)(Dn)(q||(q=Object(b.a)(["\n  margin: 0 15px 0 15px;\n"]))),Hn=function(n){var e=n.data,t=e.content,a=e.type;if("link"===a){var r=document.createElement("a");r.href=t,r.target="_blank",r.style.display="absoulte";var o=function(n){document.body.appendChild(r),r.click(),r.remove()},i=t;return i.length>40&&(i=(i=t.substr(0,15)+"..."+t.substr(15)).substr(0,35)),t.toLowerCase().endsWith(".mp4")?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Tn,{controls:!0,src:t,children:Object(j.jsx)("source",{src:t,type:"video/mp4"})}),Object(j.jsx)(Rn,{"data-type":"link",onClick:o,children:t})]}):Object(j.jsx)(Rn,{"data-type":"link",onClick:o,children:t})}if("code"===a){var c=t.split("\n"),s=1,d=c.map((function(n){return Object(j.jsx)(_n,{"data-line":s,children:n},s++)}));return Object(j.jsx)(Bn,{"data-type":"code",children:d})}return Object(j.jsx)(Gn,{children:t})},Ln=Object(x.memo)((function(n){var e=n.msg,t=e.text,a=e.mine,r="%{blck#$}",o=[],i=!1,c=(t=t.replace(/(\b((https:\/\/)|(http:\/\/)|(ftp:\/\/)|(www\.))((.*?)[^\s\n\t\r\v]*))|\n|{code}([\w\W]+?){code}|{code}([\w\W]+?){\/code}/gim,(function(n,e){return"\n"===n?(o.push({type:"br",content:""}),r):n.toLowerCase().startsWith("{code}")?(o.push({type:"code",content:n.substr(6,n.length-12)}),i=!0,r):(o.push({type:"link",content:n}),r)}))).split(r),s=[];for(var d in c){var l=c[d];l.length>0&&s.push({type:"text",content:l});var u=o[d];u&&s.push(u)}var p=0,g=s.map((function(n){return Object(j.jsx)(Hn,{data:n},p++)})),b=null;return"+"===t&&(b="plus"),"-"===t&&(b="minus"),Object(j.jsx)(wn,{"data-status":b,"data-full-width":i,"data-mine":a,"data-type":"message",children:g})})),zn=h.a.div($||($=Object(b.a)(["\n  width: 88%;\n  max-width: 88%;\n  position: relative;\n  align-self: flex-start;\n  align-items: center;\n  display: flex;\n  color: ",';\n  &[data-mine="true"] {\n    justify-content: flex-end;\n    align-self: flex-end;\n    color: ',';\n  }\n  &[data-mine="false"] {\n    flex-direction: row-reverse;\n    justify-content: flex-end;\n    margin-left: 50px;\n  }\n\n  &[data-mine="true"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n  &[data-mine="false"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n\n  & > div[data-status="plus"] {\n    background-color: #4caf50;\n    color: white;\n    :before {\n      border-color: #4caf50 !important;\n    }\n  }\n  & > div[data-status="minus"] {\n    background-color: #ce3f44;\n    color: white;\n    :before {\n      border-color: #ce3f44 !important;\n    }\n  }\n\n  &[data-mine="true"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-mine="false"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-position="middle"],\n  &[data-position="first"],\n  &[data-position="last"] {\n    margin-bottom: 1px;\n  }\n  &[data-position="standalone"],\n  &[data-position="last"] {\n    margin-bottom: 30px;\n  }\n  &:hover > div[data-type="time"] {\n    opacity: 1;\n    transition: opacity 0.2s;\n  }\n'])),A.a.chatMessageColorLeft,A.a.chatMessageColorRight,A.a.messageCloudTaleRight,A.a.messageCloudTaleLeft,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageSmallBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius,A.a.chatMessageBorderRadius),Nn=h.a.div(nn||(nn=Object(b.a)(["\n  font-size: 10px;\n  white-space: nowrap;\n  color: ",";\n  opacity: 0;\n  margin: 0 10px 0 10px;\n  transition: opacity 0.2s 5s;\n  user-select: none;\n  pointer-events: none;\n  /* background-color: #213346b7;\n    padding:3px 7px 3px 7px;\n    border-radius:9px;\n    color:white;*/\n"])),A.a.chatMessageTimeColor),Un=h.a.div(en||(en=Object(b.a)(["\n  font-size: 11px;\n  position: absolute;\n  top: -16px;\n  color: ",";\n"])),A.a.chatMessageAuthorColor),Pn=h.a.div(tn||(tn=Object(b.a)(["\n  /*background-color: #213346b7;*/\n  background-color: #5a6979;\n  padding: 5px 15px 5px 15px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 1);\n  white-space: nowrap;\n  border-radius: 10px;\n  margin: 0px 0 25px 0;\n  text-align: center;\n  width: 120px;\n  align-self: center;\n  position: sticky;\n  z-index: 10;\n  top: 10px;\n"]))),Jn=function(n){var e=on.a.dateFormatter.format(n.message.created,"%h:%i");return Object(j.jsx)(Nn,{"data-type":"time",children:e})},Fn=function(n){var e,t=n.message,a=null;t.sys&&("botMenu"===t.type&&(a=Object(j.jsx)(bn,{data:t.sys,msg:t})),"botCommand"===t.type&&(a=Object(j.jsx)(dn,{msg:t})),"img"===t.type&&(a=Object(j.jsx)(hn,{msg:t})),"file"===t.type&&(a=Object(j.jsx)(An,{msg:t})),null==a&&(t.text=null===(e=t.sys)||void 0===e?void 0:e.title),t.text||(t.text="System msg ".concat(t.sys.method," without title")));var r=null;t.date&&(r=Object(j.jsx)(Pn,{children:t.date}));var o=null,i=null;return t.mine||"first"!==t.position&&"standalone"!==t.position||(o=Object(j.jsx)(Un,{children:t.user_name})),t.mine||"last"!==t.position&&"standalone"!==t.position||(i=Object(j.jsx)(kn,{children:Object(j.jsx)(cn.a,{user:t.user_uid,avatar:t.user_avatar})})),null==a&&(a=Object(j.jsx)(Ln,{msg:t})),Object(j.jsxs)(j.Fragment,{children:[r,Object(j.jsxs)(zn,{"data-position":t.position,"data-mine":t.mine,onClick:function(e){e.shiftKey&&console.log(n.message)},children:[Object(j.jsx)(Jn,{message:t}),o,a,i]})]})},Qn=function(){var n=Object(x.useState)([]),e=Object(m.a)(n,2),t=e[0],a=e[1];Object(x.useEffect)((function(){return f.a.S_CHAT_MESSAGES.add((function(n){jn===n.chatUID&&a(Object(rn.a)(n.msgs))}),"ChatMessages"),f.a.S_GUI_MESSAGES_RENDERED.invoke(),function(){f.a.S_CHAT_MESSAGES.clearContext("ChatMessages")}}));var r=null,o=0;return t&&t.length>0&&(r=t.map((function(n){return Object(j.jsx)(Fn,{message:n},o++)}))),Object(j.jsx)(mn,{children:r})},Yn=t(29),Zn=t(22),Vn=t(27),Wn=h.a.div(On||(On=Object(b.a)(["\n    font-size:20px;\n    position: absolute;\n    top:66px;\n    right:8px;\n    user-select:none;\n    pointer-events: none;\n    display:flex;\n    width:100%;\n    flex-direction: column;\n    align-items: flex-end;\n    z-index:30;\n"]))),Kn=h.a.div(vn||(vn=Object(b.a)(['\n    padding:5px 10px 5px 10px;\n    font-size:11px;\n    background-color:rgba(0,0,0,.7);\n    color:white;\n    border-radius: 10px;\n    max-width: 50%;\n    overflow:hidden;\n    text-overflow: ellipsis;\n    white-space:nowrap;\n    margin-bottom: 2px;\n    box-shadow:0px 1px 2px rgba(0,0,0,.3);\n    &[data-status="finish"]{\n        background-color: #3b548e;\n    }\n    &[data-status="fail"]{\n        background-color: #ce3f44;\n    }\n']))),Xn=function(n){return Object(j.jsx)(Kn,{"data-status":n.data.status,children:n.data.file.name})},qn=function(){var n=Object(x.useState)([]),e=Object(m.a)(n,2),t=e[0],a=e[1];Object(x.useEffect)((function(){return f.a.S_FILE_UPLOADING_LIST_UPDATED.add((function(n){a(n)}),"ChatUploadingFiles"),function(){f.a.S_FILE_UPLOADING_LIST_UPDATED.clearContext("ChatUploadingFiles")}}));var r=0,o=t.map((function(n){return Object(j.jsx)(Xn,{data:n},r++)}));return Object(j.jsx)(Wn,{children:o})},$n=h.a.div(En||(En=Object(b.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.65);\n"]))),ne=h.a.div(In||(In=Object(b.a)(["\n  width: 80%;\n  max-height: 80%;\n  min-height: 10%;\n  border-radius: 10px;\n  padding: 10px;\n  background-color: white;\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);\n  color: #e91e63;\n  display: flex;\n  font-size: 15px;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  white-space: pre-line;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),ee=function(){var n=Object(x.useState)(null),e=Object(m.a)(n,2),t=e[0],a=e[1];Object(x.useEffect)((function(){return f.a.S_ALERT_ERROR.add((function(n){f.a.S_LOGE.invoke(n),a(n)}),"alert"),function(){f.a.S_ALERT_ERROR.clearContext("alert")}}));return t?Object(j.jsx)($n,{onClick:function(n){a(null)},children:Object(j.jsx)(ne,{children:t})}):Object(j.jsx)(j.Fragment,{})};Yn.a.registerPlugin(Vn.a);var te,ae,re,oe,ie=Object(h.b)(Mn||(Mn=Object(b.a)(["\n    from {\n        transform: translateY(10px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0px);\n        opacity: 1;\n    }\n"]))),ce=h.a.div(Sn||(Sn=Object(b.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]))),se=h.a.div(yn||(yn=Object(b.a)(["\n  position: absolute;\n  border-radius: 15px;\n  padding: 5px 10px;\n  background: ",";\n  color: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  animation: "," 0.5s linear;\n  transition: 0.5s ease;\n  min-width: 200px;\n  max-width: 100%;\n  z-index: 11;\n"])),A.a.toastBGColor,A.a.toastTextColor,ie),de=h.a.div(Cn||(Cn=Object(b.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  width: 15px;\n  height: 15px;\n  min-width: 15px;\n  min-height: 15px;\n  cursor: pointer;\n  background-size: 15px;\n  margin-left: 5px;\n"]))),le=function(n){var e=Object(x.useRef)(null),t=function(t){e.current&&(e.current.getAttribute("active")||Zn.d.to(e.current,.5,{opacity:0,top:"0px",ease:"ease",onComplete:function(){e.current&&(e.current.style.opacity="1",e.current.style.top="calc(50px + (".concat(n.position," * 35px))"),e.current.setAttribute("active","1")),f.a.S_TOAST_DELETE.invoke(t),f.a.REQ_TOASTS.invoke().then((function(e){return n.setToasts(e)}))}}),e.current.getAttribute("active")&&e.current.removeAttribute("active"))};return n.deletedToast===n.toast.tempUID&&t(n.toast.tempUID),Object(j.jsxs)(se,{style:{top:"calc(50px + (".concat(n.position," * 35px))")},ref:e,children:[n.toast.text,Object(j.jsx)(de,{onClick:function(){return t(n.toast.tempUID)}})]})},ue=function(){var n=Object(x.useState)([]),e=Object(m.a)(n,2),t=e[0],a=e[1],r=Object(x.useState)(null),o=Object(m.a)(r,2),i=o[0],c=o[1];return Object(x.useEffect)((function(){return f.a.S_TOAST.add((function(){f.a.REQ_TOASTS.invoke().then((function(n){return a(n)}))}),"toast"),f.a.S_TOAST_DELETE.add((function(n){c(n)}),"toast"),function(){f.a.S_TOAST.clearContext("toast"),f.a.S_TOAST_DELETE.clearContext("toast")}}),[]),Object(j.jsx)(ce,{children:t.length>0&&t.map((function(n,e){return Object(j.jsx)(le,{toast:n,position:e,deletedToast:i,setToasts:a},n.state+e)}))})};Yn.a.registerPlugin(Vn.a);var pe=25,ge=25,be="320px",xe="60vh",he=h.a.div(te||(te=Object(b.a)(["\n  bottom: ","px;\n  right: ","px;\n"])),ge,pe),fe=Object(h.a)(he)(ae||(ae=Object(b.a)(['\n  display: flex;\n  font-family: "Open Sans", sans-serif;\n  flex-direction: column;\n  position: absolute;\n  width: ',";\n  height: ",";\n  background-color: ",";\n  border-radius: 30px;\n  overflow: hidden;\n  font-size: ",';\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);\n  transition: height 0.2s, width 0.2s;\n  line-height: normal !important;\n  transform: scaleZ(1);\n  &[data-mobile="true"] {\n    position: relative;\n    bottom: auto;\n    right: auto;\n    left: 0;\n    top: 0;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    width: 100vw;\n    height: 100vh;\n    box-shadow: none;\n  }\n\n  &[data-messenger="true"] {\n    position: relative;\n    height: auto;\n    bottom: auto;\n    right: auto;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    max-width: 600px;\n    box-shadow: none;\n  }\n'])),be,xe,A.a.chatBG,A.a.chatMessageTextSize),Ae=h.a.div(re||(re=Object(b.a)(["\n  flex-grow: 1;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: auto;\n  width: calc(100% - 5px);\n"]))),me=h.a.div(oe||(oe=Object(b.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n"]))),je=null;e.default=function(n){var e=0,t=0,a=0,r=0,o=Object(x.useRef)(null),i=Object(x.useRef)(null),c=function(n){if(o.current){var i=a-(n.clientX-e),c=r-(n.clientY-t);o.current.style.bottom=c+"px",o.current.style.right=i+"px",s()}},s=function(){if(o.current){var n=o.current.getBoundingClientRect(),e=parseInt(o.current.style.right),t=parseInt(o.current.style.bottom);if(!isNaN(e)&&!isNaN(t)){e<pe&&(e=pe),t<ge&&(t=ge);var a=window.innerWidth-n.width,r=window.innerHeight-n.height;e>a&&(e=a),t>r&&(t=r),o.current.style.bottom=t+"px",o.current.style.right=e+"px"}}},d=function(n){s()},l=function(n){c(n)},u=function n(e){c(e),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",n)},p=function(){o.current&&(je&&je.kill(),o.current.setAttribute("opening","1"),o.current.removeAttribute("expanded"),o.current.style.opacity="0",o.current.style.removeProperty("display"),je=Zn.d.to(o.current,.2,{width:be,height:xe,bottom:ge+"px",right:pe+"px",opacity:1,ease:Zn.c.easeIn,onComplete:function(){o.current&&o.current.removeAttribute("opening"),f.a.S_GUI_CHAT_OPENED.invoke()}}))};Object(x.useEffect)((function(){f.a.S_GUI_MESSAGES_RENDERED.add((function(){i.current&&(i.current.scrollTop=i.current.scrollHeight-i.current.clientHeight),o.current&&"none"===o.current.style.display&&p()}),"chat");var e=window.__DCCSharedObject;return e&&!n.sharedObject.messenger&&o.current&&(n.sharedObject.mobile||(o.current.style.right=pe+"px",o.current.style.bottom=ge+"px",e.bottomOffset&&!isNaN(e.bottomOffset)&&(ge=e.bottomOffset),e.rightOffset&&!isNaN(e.rightOffset)&&(pe=e.rightOffset)),s()),f.a.S_GUI_CLOSE_CHAT.add((function(n){o.current&&(je&&je.kill(),o.current.setAttribute("closing","1"),o.current.removeAttribute("expanded"),je=Zn.d.to(o.current,.2,{width:0,height:0,bottom:ge+"px",right:pe+"px",opacity:0,ease:Zn.c.easeIn,onComplete:function(){o.current&&(o.current.style.display="none",o.current.removeAttribute("closing")),f.a.S_GUI_CHAT_CLOSED.invoke()}}))}),"chat"),f.a.S_GUI_OPEN_CHAT.add((function(){p()}),"chat"),n.sharedObject.messenger||window.addEventListener("resize",d),function(){window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",u),window.removeEventListener("resize",d),f.a.S_GUI_MESSAGES_RENDERED.clearContext("chat"),f.a.S_GUI_CLOSE_CHAT.clearContext("chat"),f.a.S_GUI_OPEN_CHAT.clearContext("chat"),f.a.S_GUI_REPOSITION_CHAT.clearContext("chat"),je&&je.kill()}}));var g=function(n){n.preventDefault();for(var e=[],t=n.dataTransfer.files.length,a=0;a<t;a++){var r=n.dataTransfer.files.item(a);r&&e.push(r)}f.a.S_FILE_PREVIEW_ATTACH.invoke(e)},b=function(n){n.preventDefault()},h=n.sharedObject.headless?null:Object(j.jsx)(E,{messenger:n.sharedObject.messenger,onDoubleClick:function(e){o.current&&(o.current.getAttribute("closing")||n.sharedObject.messenger||n.sharedObject.mobile||(o.current.getAttribute("expanded")?(je=Zn.d.to(o.current,.2,{width:320,height:"50vh",bottom:ge+"px",right:pe+"px",ease:Zn.c.easeOut}),o.current.removeAttribute("expanded")):(je=Zn.d.to(o.current,.2,{width:390,height:"calc(95vh - ".concat(ge,"px)"),bottom:ge+"px",right:pe+"px",ease:Zn.c.easeOut}),o.current.setAttribute("expanded","1"))))}});return n.sharedObject.messenger?Object(j.jsxs)(fe,{id:"DukascopyConnect","data-messenger":n.sharedObject.messenger,ref:o,children:[h,Object(j.jsx)(Ae,{ref:i,onDrop:g,onDragOver:b,children:Object(j.jsx)(me,{children:Object(j.jsx)(Qn,{})})}),Object(j.jsx)(qn,{}),Object(j.jsx)(an,{messenger:n.sharedObject.messenger}),Object(j.jsx)(ue,{}),Object(j.jsx)(ee,{})]}):Object(j.jsxs)(fe,{id:"DukascopyConnect","data-mobile":n.sharedObject.mobile,ref:o,onMouseDown:function(i){if(!n.sharedObject.mobile&&o.current&&"chatHead"===i.target.id){e=i.clientX,t=i.clientY;var c=o.current.getBoundingClientRect();a=c.left,r=c.top,a=parseInt(o.current.style.right),r=parseInt(o.current.style.bottom),isNaN(a)&&(a=pe,o.current.style.right=a+"px"),isNaN(r)&&(r=ge,o.current.style.bottom=r+"px"),window.addEventListener("mousemove",l),window.addEventListener("mouseup",u)}},children:[h,Object(j.jsx)(Ae,{ref:i,onDrop:g,onDragOver:b,children:Object(j.jsx)(me,{children:Object(j.jsx)(Qn,{})})}),Object(j.jsx)(qn,{}),Object(j.jsx)(an,{}),Object(j.jsx)(ee,{})]})}}}]);