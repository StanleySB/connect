(this["webpackJsonpsupport-chat-widget"]=this["webpackJsonpsupport-chat-widget"]||[]).push([[1],{26:function(n,e,t){"use strict";var a,r,i=t(31),o=t(23),c=(t(12),t(24)),s=t(8),d=c.a.div(a||(a=Object(o.a)(["\n  position: relative;\n  z-index: 100;\n"]))),u=c.a.div(r||(r=Object(o.a)(["\n  position: absolute;\n  top: 10px;\n  background: gray;\n  border-radius: 5px;\n  padding: 5px 5px;\n  max-width: 400px;\n  width: max-content;\n"])));e.a=function(n){var e=n.text,t=n.open,a=n.additioanalStyle;return Object(s.jsx)(d,{style:Object(i.a)({display:"".concat(t?"block":"none")},a),children:Object(s.jsx)(u,{children:e})})}},27:function(n,e,t){"use strict";var a,r=t(23),i=(t(12),t(24)),o=t(8),c=i.a.div(a||(a=Object(r.a)(["\n  width: 33px;\n  height: 31px;\n  min-width: 33px;\n  min-height: 31px;\n  border-radius: 50%;\n  background-color: #595973;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  text-align: center;\n  padding-top: 9px;\n  font-size: 11px;\n  line-height: 13px;\n"])));e.a=function(n){var e=n.user.split(" ").map((function(n){var e;return null===(e=n[0])||void 0===e?void 0:e.toUpperCase()})).join("");return Object(o.jsx)(c,{children:e})}},41:function(n,e,t){"use strict";t.r(e);var a,r,i,o,c,s,d,u,l,p,g,b,h,x,f=t(23),A=t(12),m=t.n(A),j=t(24),v=t(0),O=t(13),E=t(25),M=t(26),S=t(8),w=j.a.div(a||(a=Object(f.a)(["\n  background-color: ",";\n  color: ",";\n  padding: 5px 15px;\n  display: flex;\n  overflow-x: auto;\n  overflow-y: unset;\n"])),O.a.chatColor,O.a.chatHeadColor),I=j.a.div(r||(r=Object(f.a)(['\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  min-height: 40px;\n  background: white;\n  border-radius: 10px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  margin: 0px 5px;\n  border: 0.5px solid black;\n  position: relative;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABmJLR0QA/wD/AP+gvaeTAAADtklEQVRoge2az2scZRjHP8/MJCAYFESrNpSWCC3iRf0DepGiFkwFHZ11QgkKNRsTiwdP0mpPXo1JShDRJJsNLGylsVVQFHuoBwV7KMWToWCsh4jWxIPd7LyPh8QaEs3sj2fSCPO57vt+9/vd533fed93FnJycnJydi6yHV8yMVXZkwT1XpTDCnuB7rWPFgSuKnoOzzs7GEU/Zu0l08CnJyu7kyA5IeiLgJ/S3IFUPY/XB6LoalaeMgs8Xi4fUWUauL3JrsviJC72RXNZ+PKyEB2bmXlVlSrNhwXoUk8/Gp2ZHbb2BRlUeK2yVdr/MZ04edq60qaBR0qlbl+872mtsv/GsvPkwFAUXTPSsx3SnninsAsL0OU7fctQz67CE1OVPXW/Pk/6atwsSaJu73AcL1iImVV4xU+OYB8WwA/we63EzAKL6hNWWhtR0SettOzmsMgDZlqb6bESMly09F47rU3sthKyXKUtV+fMtDPZae1kLAP/Yai1kSUrIcvAZruhLLXtAivzZlqbMdM2fCzpeTOtDSh6zkrLLrDnnQUSM71/qDvVj63EzAKvXs/Ih1Z6N1Het9pHg/Vpqe6fBJYNJZcCTUxPS6aBB46GP4l6z2EztB1CfKyv72cDrZuYbzyK8fOfKvIa4NqQcSIcHywUzObu32R3iTc9+5R6WgK6muy6pOpeeCWOzVbm9WS2tSz2RXNJR9ADOgLUG+jiBJ0OXHIgq7CwTRfxI6VSd4Dfq+IOg+xj3UU8MI9wPnFuznI1zsnJycn5P5LZY6lSqfiLtdojIvKwU3lIRB8E6QbuBO4AQLmO8DvoAnBF4Eried/t8v1LYRhmcfKyDXx6auoeFwTPoHII9CCr4VrhN4SvxMln9U6/OhyGi1Ye2w5cqVQ6F1dWnkUlRngMCAx8racO+jki03cHQTUMw1o7Yi0HHp2cvEs6Ol5GGQTua8dEE1wTZbSzM5h4KQx/bUWg6cBrFR0AeZPWh2y7XBf07dtqtXf6+/v/bKZjU4HHy+WDqvIB6L7m/GWDwA+JuqNDcXyx0T4NnZZUVcZmZk+p8sVOCQug0OOJd2G8XD6hqg0VL7WRqspYufyuIIPtW8wQ4b1iFB0TEd2qWer73F379w+BnLRzlhmPfnv58i+fnDnzzVaNUoe0KsftPGWNpP7zp5E5fL+Bk+0i1WsjgS8ZGNkuUr2mBvaEN2jsTupWsyKrXrckNfBAofClqjyO8jVww8SaLTcEueicHCoWChdutZmcnJycnJyc/+YvUbMou8GhctcAAAAASUVORK5CYII=);\n  &::after {\n    background-color: red;\n    border-radius: 50%;\n    content: "";\n    height: 10px;\n    width: 10px;\n    position: absolute;\n    top: -3px;\n    right: -3px;\n  }\n  &[data-online="true"]&::after {\n    background-color: green;\n  }\n']))),y=function(n){var e=n.users,t=n.onlineUsers,a=Object(A.useState)({uid:"",open:!1}),r=Object(E.a)(a,2),i=r[0],o=r[1];return Object(S.jsx)(w,{children:e.map((function(n){var e;return Object(S.jsxs)(m.a.Fragment,{children:[Object(S.jsx)(I,{style:n.avatar?{backgroundImage:"url(".concat(n.avatar,")")}:{},"data-online":null===(e=t.get(n.uid))||void 0===e?void 0:e.online,onMouseOver:function(){return o({uid:n.uid,open:!0})},onMouseOut:function(){return o({uid:n.uid,open:!1})}}),Object(S.jsx)(M.a,{text:n.name,open:i.uid===n.uid&&i.open})]},n.uid+i+t.values)}))})},k=j.a.div(i||(i=Object(f.a)(["\n  position: relative;\n  background-color: ",";\n  color: ",';\n  font-family: "Open Sans", sans-serif;\n  font-style: normal;\n  font-weight: 700;\n  padding: 15px 30px;\n  cursor: pointer;\n  text-transform: uppercase;\n  letter-spacing: 0.02em;\n  font-size: 22px;\n  line-height: 30px;\n  &[data-uid]::after {\n    content: attr(data-uid);\n    display: block;\n    font-size: 12px;\n    opacity: 0.4;\n    line-height: 14px;\n    font-family: "SF Pro Display";\n    font-weight: 400;\n  }\n  &[data-status="0"]::before {\n    background-color: rgba(0, 0, 0, 0.2);\n  }\n  &[data-status="1"]::before {\n    background-color: #ff9009e1;\n  }\n  &[data-status="2"]::before {\n    background-color: #15ff09e0;\n  }\n'])),O.a.chatColor,O.a.chatHeadColor),D=j.a.div(o||(o=Object(f.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  position: absolute;\n  right: 30px;\n  width: 20px;\n  height: 20px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  top: calc(50% - 10px);\n"]))),C=j.a.div(c||(c=Object(f.a)(['\n  &[data-show-status="true"]&::after {\n    background-color: red;\n    border-radius: 50%;\n    content: "";\n    height: 10px;\n    width: 10px;\n    position: absolute;\n    top: 20px;\n    margin: 0px 10px;\n  }\n  &[data-show-status="true"]&[data-online]&::after {\n    background-color: green;\n  }\n']))),R=function(n){var e,t,a=Object(A.useState)(null),r=Object(E.a)(a,2),i=r[0],o=r[1],c=Object(A.useState)(0),s=Object(E.a)(c,2),d=s[0],u=s[1],l=Object(A.useState)(new Map),p=Object(E.a)(l,2),g=p[0],b=p[1];Object(A.useEffect)((function(){return v.a.S_CHAT_OPENED.add((function(n){o(n)}),"ChatHead"),v.a.S_WS_AUTHORIZED.add((function(n){u("guest"===n?1:2)}),"ChatHead"),v.a.S_WS_CLOSED.add((function(){u(0)}),"ChatHead"),v.a.S_CHAT_USER_STATUS_CHANGED.add((function(){v.a.REQ_USERS_STATUS.invoke().then((function(n){b(n)}))}),"ChatHead"),function(){v.a.S_CHAT_OPENED.clearContext("ChatHead"),v.a.S_WS_AUTHORIZED.clearContext("ChatHead"),v.a.S_WS_CLOSED.clearContext("ChatHead"),v.a.S_CHAT_OPENED.clearContext("ChatHead")}}));var h=function(){return!!((null===i||void 0===i?void 0:i.users)&&(null===i||void 0===i?void 0:i.users.length)>1)},x=Object(S.jsx)(C,{children:"Loading..."});null!=i&&(x=Object(S.jsx)(C,{"data-show-status":!h(),"data-online":!h()&&(null===(e=g.get(null===i||void 0===i||null===(t=i.users[0])||void 0===t?void 0:t.uid))||void 0===e?void 0:e.online),children:i.title}));var f=null;if(null!=i&&n.messenger&&"private"===i.type){f=Object(S.jsx)("div",{onClick:function(n){v.a.S_REQUEST_CALL.invoke({chatVO:i,audio:!0,video:!0})},children:"CALL"})}var m=n.messenger?null:Object(S.jsx)(D,{onClick:function(n){v.a.S_LOG.invoke("on close button click"),v.a.S_GUI_CLOSE_CHAT.invoke({uid:null===i||void 0===i?void 0:i.uid})}});return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)(k,{onDoubleClick:n.onDoubleClick,id:"chatHead","data-staus":d,"data-uid":i?null===i||void 0===i?void 0:i.uid:"...",children:[x,m,f]}),h()&&(null===i||void 0===i?void 0:i.users)&&Object(S.jsx)(y,{users:null===i||void 0===i?void 0:i.users,onlineUsers:g})]})},_=t(6),T=j.a.div(s||(s=Object(f.a)(["\n  display: flex;\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 13px 15px 18px 15px;\n  background-color: ",";\n  align-items: center;\n"])),O.a.chatColor),B=null,U=j.a.button(d||(d=Object(f.a)(["\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  background-size: contain;\n  background-position: center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  align-self: center;\n  border: none;\n  background: none;\n"]))),z=Object(j.a)(U)(u||(u=Object(f.a)(["\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTEuMjUiIHN0cm9rZT0iI0M4RDBEQiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPHBhdGggZD0iTTEyIDVWMTlNNSAxMkgxOSIgc3Ryb2tlPSIjQzhEMERCIiBzdHJva2Utd2lkdGg9IjEuNSIvPgo8L3N2Zz4K);\n"]))),L=Object(j.a)(U)(l||(l=Object(f.a)(["\n  border-radius: 50%;\n  background-size: 60%;\n  background-color: ",";\n  background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjMiIHZpZXdCb3g9IjAgMCAyNCAyMyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuMDgyMzEgOS45NjQyNkMxLjI5MyA5Ljc1MjE0IDAuODMzMzk0IDguOTcxMjIgMS4wNTYyIDguMjE4ODRDMS4xODkwOSA3Ljc2ODkzIDEuNTQ3NzcgNy40MTAzNCAyLjAxMzM3IDcuMjYxOTVMMjIuMDY3IDEuMDM1NTNDMjIuNDYwNiAwLjkxMjgyMyAyMi44ODQzIDEuMTE4MjggMjMuMDEzMiAxLjQ5MzA0QzIzLjA2MjEgMS42MzU3MiAyMy4wNjIxIDEuNzg5ODEgMjMuMDE0MiAxLjkzMjQ5TDE2LjQ3ODggMjEuMDMzMUMxNi4yMiAyMS43NzQxIDE1LjM3ODggMjIuMTczNiAxNC42MDA1IDIxLjkyNzNDMTQuMTMyOSAyMS43Nzg5IDEzLjc3MjIgMjEuNDE4NCAxMy42NDAzIDIwLjk2NjZMMTEuMzk2MiAxMi4wOTExTDIuMDgyMzEgOS45NjQyNloiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPHBhdGggZD0iTTIyLjgyOTYgMS4yMDcwM0wxMS4zOTY1IDEyLjA5MTQiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMS41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==);\n  width: 42px;\n  height: 42px;\n  min-width: 42px;\n  min-height: 42px;\n  background-position: 7px 10px;\n  background-repeat: no-repeat;\n"])),O.a.chatSendBtnBg),N=j.a.div(p||(p=Object(f.a)(["\n  flex-grow: 1;\n  max-height: 200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  color: ",';\n  font-size: 15px;\n  line-height: 18px;\n  &:focus {\n    outline: none;\n  }\n  margin: 4px 10px 4px 10px;\n  &[data-prompt="true"] {\n    opacity: 0.7;\n    color: #fff;\n  }\n'])),O.a.chatInputColor),P=j.a.div(g||(g=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  margin: 0px 10px;\n  overflow-x: auto;\n"]))),H=j.a.div(b||(b=Object(f.a)(["\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  min-height: 24px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  cursor: pointer;\n  background-size: 16px;\n  background-repeat: no-repeat;\n  background-position: 3px 3px;\n  border-radius: 50%;\n  background-color: #a5201c;\n  margin-right: 5px;\n  border: 1px solid #fff;\n"]))),Q=j.a.div(h||(h=Object(f.a)(["\n  width: 80px;\n  height: 80px;\n  min-width: 80px;\n  min-height: 80px;\n  border-radius: 15px;\n  margin: 2.5px 5px;\n  position: relative;\n  background-size: cover;\n  background-position: center;\n  background-color: #3b548d;\n  word-break: break-all;\n  font-size: 12px;\n  text-align: center;\n  padding: 0px 5px;\n  padding-top: 50px;\n  overflow: hidden;\n  color: #fff;\n"]))),G=j.a.div(x||(x=Object(f.a)(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  width: 15px;\n  height: 15px;\n  border-radius: 50%;\n  color: #fff;\n  cursor: pointer;\n  line-height: 0px;\n  font-size: 15px;\n  font-weight: bold;\n  padding-top: 6px;\n  background: rgba(0, 0, 0, 0.5);\n"]))),F=function(n){var e=Object(A.useState)(null),t=Object(E.a)(e,2),a=t[0],r=t[1];!function(n){var e=new FileReader;e.readAsDataURL(n),e.onload=function(){r(e.result)},e.onerror=function(n){console.error("Error: ",n)}}(n.fileVo.file);return Object(S.jsxs)(Q,{style:{backgroundImage:"url(".concat(a)},children:[!function(n){var e;return n&&null!=(null===n||void 0===n||null===(e=n.toString())||void 0===e?void 0:e.match(/(jpeg|jpg|gif|png);base64/))}(a)&&n.fileVo.file.name,Object(S.jsx)(G,{onClick:function(){v.a.S_FILE_PREVIEW_DELETE.invoke(n.fileVo.tempUID)},children:"x"})]})},W=!1,V="Type your message...";v.a.S_SHARED_OBJECT_READY.add((function(n){n.promptMessage&&"string"===typeof n.promptMessage&&(V=n.promptMessage)}));var J,Z,K,Y,X,q,$,nn,en,tn,an,rn,on,cn,sn,dn,un,ln,pn,gn,bn,hn,xn=function(n){var e=Object(A.useRef)(null),t=Object(A.useRef)(null),a=Object(A.useState)(null),r=Object(E.a)(a,2),i=r[0],o=r[1],c=Object(A.useState)(null),s=Object(E.a)(c,2),d=s[0],u=s[1],l=function(n){v.a.REQ_FILE_PREVIEW_GET_BY_UID.invoke(n).then((function(n){return o(n?Array.from(n.values()):null)}))};Object(A.useEffect)((function(){var n=e.current;return n&&n.addEventListener("paste",p),v.a.S_CHAT_OPENED.add((function(n){u(n),l(n.uid)}),"chatInput"),d&&v.a.S_FILE_PREVIEW_ATTACH.add((function(){l(d.uid)}),"chatInput")&&v.a.S_FILE_PREVIEW_DELETE.add((function(){l(d.uid)}),"chatInput")&&v.a.S_FILE_PREVIEW_DELETE_ALL.add((function(){o(null)}),"chatInput"),function(){n&&n.removeEventListener("paste",p),v.a.S_AUTH_ERROR.clearContext("chatInput"),v.a.S_CHAT_OPENED.clearContext("chatInput"),v.a.S_FILE_PREVIEW_ATTACH.clearContext("chatInput"),v.a.S_FILE_PREVIEW_DELETE.clearContext("chatInput"),v.a.S_FILE_PREVIEW_DELETE_ALL.clearContext("chatInput")}}));var p=function(n){if(e.current){var t=n;if(t&&t.clipboardData){var a,r=!1,i=Object(_.a)(t.clipboardData.items);try{for(i.s();!(a=i.n()).done;){var o=a.value;if("file"===o.kind){var c=o.getAsFile();c&&v.a.S_FILE_PREVIEW_ATTACH.invoke([c])}-1===o.type.indexOf("text/rtf")&&-1===o.type.indexOf("editor")||(r=!0)}}catch(u){i.e(u)}finally{i.f()}var s=n.clipboardData.getData("text");r&&(s="{code}"+s+"{code}"),W=!0;var d=window.getSelection();d&&d.rangeCount&&(B||(B=document.createElement("div")),B.textContent=s,s=B.textContent,d.deleteFromDocument(),d.getRangeAt(0).insertNode(document.createTextNode(s)),n.preventDefault())}}},g=function(){if(i&&i.length>0&&d)return v.a.S_CHAT_FILE_SEND_REQUEST.invoke(d.uid),void(W=!1);if(e.current){var n=e.current.innerHTML;if(n){n=(n=(n=(n=n.replace("\t","TAB")).replaceAll("<br>","\n")).replaceAll("<div>","")).replaceAll("</div>","\n"),e.current.textContent=n,n=e.current.textContent;var t={"&nbsp;":"","&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};for(var a in t)n=n.replaceAll(a,t[a]);n?W?n.length>2e3?v.a.S_ALERT_ERROR.invoke("Message too big!"):(W=!1,e.current.textContent="",e.current.focus(),v.a.S_CHAT_MESSAGE_SEND_REQUEST.invoke(n)):v.a.S_LOGE.invoke("Input wasn't changed"):v.a.S_LOGE.invoke("No text to send")}}};return console.log(W),Object(S.jsxs)(T,{children:[Object(S.jsx)(z,{onClick:function(n){t.current&&t.current.click()},disabled:!(10!==(null===i||void 0===i?void 0:i.length))}),i&&i.length>0?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(P,{children:i.map((function(n,e){return Object(S.jsx)(F,{fileVo:n},e)}))}),Object(S.jsx)(H,{onClick:function(){d&&v.a.S_FILE_PREVIEW_DELETE_ALL.invoke(null===d||void 0===d?void 0:d.uid)}})]}):Object(S.jsx)(N,{ref:e,onFocus:function(n){e.current&&(W||(e.current.removeAttribute("data-prompt"),e.current.textContent=""))},"data-prompt":!0,onBlur:function(n){e.current&&(e.current.textContent&&0===e.current.textContent.length&&(W=!1),W||(e.current.textContent=V,e.current.setAttribute("data-prompt","true")))},onKeyUp:function(n){e.current&&("Enter"!==n.code||n.altKey||n.ctrlKey||n.shiftKey||(n.preventDefault(),g()),W=!!(e.current.textContent&&e.current.textContent.length>0))},contentEditable:!0,suppressContentEditableWarning:!0,children:V}),Object(S.jsx)(L,{onClick:function(n){g()}}),Object(S.jsx)("input",{ref:t,multiple:!0,style:{display:"none"},type:"file",onChange:function(n){var e=n.target.files;if(e){for(var t=[],a=e.length,r=0;r<a;r++){var i=e.item(r);i&&t.push(i)}a>10?alert("You can select up to 10 files"):(v.a.S_FILE_PREVIEW_ATTACH.invoke(t),n.target.value="")}},onPaste:p})]})},fn=t(29),An=t(5),mn=t(27),jn=j.a.div(J||(J=Object(f.a)(['\n  width: 24px;\n  min-width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  &[data-status="read"] {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABUUlEQVRIie2SsUrDUBiFv5tcIejcgOAbtLZUFzex3XQQKnR08BkC2hcQxb6EjhmyiYtxEMRJkdCAg7vSWcEhudehsWmDqU0nwZ7xkP/Lf85/Ya65/rzErINVz7FFZF4JeH9qn27m+cbscMMH1jRYk3xZFF53OyUVqWugAjxHqN1JfqGK6m6npFA+sJpAtsL22VueXziBRp0nkFDLuBG2uv2q59gqin0QFdA9LVUzbHX73zMFK9J3IJSW8UGQwAedp/BgBA5JRTX36FagF5WMt0c/qLmH9wIWsj6MHjQfDpC8Im1pWBeR4Vc9x04rQf7kTwsfJsgeSZpm42Hv+PUnX8U6yjto7g/SrcwboAy6pz/VRrDf/chum4z9unmmIgha3b6WcQMIQZSxjJXUV80BXFSKwMcSDJNcOEvSksuP7ZOXMd9zbCLzEgAZ70wDn+uf6AselN1N/IXehQAAAABJRU5ErkJggg==);\n  }\n  &[data-status="delivered"] {\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAA20lEQVRIie2UsQrCMBRFb4Ip/kD7FUoHacFJ1E0Hf9XFzc4uJRBw8BPET+iT1MFWQg21abrZO+aFe+57eQQYNcpXbCgjpVRUFMURACVJsqrP+VDmRJQxxpaMsalZ8wZIKUMiOgOYAbhprQ9m3WtEUspQa50BmFfm6zRN74MAupj3BnQ17wVwMbcC8jy/ABBCiF0cxw+zVm8L3g96FUJsm3ea+tqisiwnABZElCmlIh9zawfNEQDYcM6fLmNpBdjSVsdOyVsBlk7gmvwnAPj8LycACIJg75J81B/pBUirmXOOwxAnAAAAAElFTkSuQmCC);\n  }\n']))),vn=function(n){var e=n.status;return Object(S.jsx)(jn,{"data-status":e})},On=j.a.div(Z||(Z=Object(f.a)(["\n  height: 5px;\n  margin-right: 5px;\n  background-color: grey;\n  border-radius: 2px;\n  width: 24px;\n  min-width: 24px;\n  cursor: pointer;\n"]))),En=j.a.div(K||(K=Object(f.a)(["\n  height: 5px;\n  margin-right: 5px;\n  background-color: #2faa77;\n  border-radius: 2px;\n  margin-left: -1px;\n"]))),Mn=function(n){var e=Object(A.useState)(!1),t=Object(E.a)(e,2),a=t[0],r=t[1],i=n.progress,o=n.total,c=n.chipText;return Object(S.jsxs)(On,{onMouseOver:function(){return r(!0)},onMouseOut:function(){return r(!1)},children:[Object(S.jsx)(M.a,{text:c,open:a}),Object(S.jsx)(En,{style:{width:"".concat(i/o*100,"%")}})]})},Sn=j.a.div(Y||(Y=Object(f.a)(["\n  background-color: ",";\n  padding: ",";\n  border-radius: ",";\n"])),O.a.chatMessageBotItemBg,O.a.chatMessagePadding,O.a.chatMessageBorderRadius),wn=function(n){var e;return Object(S.jsx)(Sn,{"data-type":"message",children:null===(e=n.msg.sys)||void 0===e?void 0:e.title})},In=j.a.div(X||(X=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  border-top: 1px solid rgba(0, 0, 0, 0.1);\n  padding: 9px 0 9px 0;\n  &:first-child {\n    border-top: none;\n  }\n  &:hover {\n    text-decoration: underline;\n  }\n"])),O.a.chatMessageBotMenuColor),yn=function(n){var e=n.data,t=e.text,a=e.action;return Object(S.jsx)(In,{onClick:function(e){v.a.S_CHAT_BOT_COMMAND_SEND_REQUEST.invoke({action:a,title:t,actionData:null,botUID:n.userUID})},children:t})},kn=j.a.div(q||(q=Object(f.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  margin-bottom: 2px;\n  border-radius: "," ","\n    "," ",";\n  &:nth-last-child() {\n    background-color: green;\n  }\n"])),O.a.chatMessagePadding,O.a.chatMessageBg,O.a.chatTextColor,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius),Dn=j.a.div($||($=Object(f.a)(["\n  padding: ",";\n  background-color: ",";\n  color: ",";\n  border-radius: ","\n    "," ","\n    ",";\n  ",";\n"])),O.a.chatMessagePadding,O.a.chatMessageBg,O.a.chatTextColor,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.messageCloudTaleLeft),Cn=function(n){var e=null;try{var t;e=JSON.parse(null===(t=n.msg.sys)||void 0===t?void 0:t.additionalData)}catch(o){console.error("Can't parse bot menu "+o)}if(!e)return Object(S.jsx)("div",{children:"NO BOT MENU"});var a=Object(S.jsx)(kn,{children:e.menu.title}),r=null,i=0;return e&&Array.isArray(e.menu.items)&&(r=e.menu.items.map((function(e){return Object(S.jsx)(yn,{data:e,userUID:n.msg.user_uid},i++)}))),Object(S.jsxs)("div",{children:[a,Object(S.jsx)(Dn,{children:r})]})},Rn=j.a.div(nn||(nn=Object(f.a)(["\n  background-color: rgba(0, 0, 0, 0.15);\n  width: 100%;\n  max-width: 400px;\n  padding-top: 75%;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  border-radius: 6px;\n  cursor: pointer;\n  &:hover {\n    background-position: contain;\n  }\n"]))),_n=Object(A.memo)((function(n){var e,t=null===(e=n.msg.sys)||void 0===e?void 0:e.additionalData.split(","),a=t[0],r=Object(A.useState)(null),i=Object(E.a)(r,2),o=i[0],c=i[1];return Object(A.useEffect)((function(){return v.a.S_IMAGE_REQUEST.invoke({uid:a,thumb:!0,chatUID:n.msg.chatUID}),v.a.S_IMAGE_READY.add((function(n){n.uid===a&&n.thumb&&c(n.b64)}),a),function(){v.a.S_IMAGE_READY.clearContext(a)}}),[a,n.msg.chatUID]),Object(S.jsx)(Rn,{onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&v.a.S_IMAGE_DOWNLOAD_REQUEST.invoke({target:"msg",src:e.target,uid:a,name:n.msg.sys.title,chatUID:n.msg.chatUID,width:t[1],height:t[2]})},style:{backgroundImage:"url(".concat(o)}})})),Tn=j.a.div(en||(en=Object(f.a)(["\n  background-color: ",";\n  padding: 10px;\n  border-radius: ",';\n  display: flex;\n  align-items: center;\n  max-width: calc(100% - 20px);\n  cursor: pointer;\n  &::before {\n    content: "";\n    display: block;\n    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAeklEQVRIie2UwRGAIAwEL45t2I+VUIdP65RCzo9+IEKIo+M47BPusvAJ8DtIziQj6yxewWYY7pecTUvmYH1a0CZxCuySGwJVIloZAEQku0szGmlvLL3UOqQkHTyCFrqgC7rgBYG2KiKAqbbwLojpgfaDoAWNw4Oj93F2ysfj8659GAAAAAAASUVORK5CYII=);\n    width: 30px;\n    height: 30px;\n    min-width: 30px;\n    min-height: 30px;\n    background-color: ',";\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: 80%;\n    border-radius: 8px;\n    box-shadow: 0px 0px 1px rgba(0, 0, 0, 0.5);\n    margin-right: 10px;\n  }\n  &::after {\n    content: attr(data-title);\n    display: block;\n    flex-grow: 1;\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n"])),O.a.chatMessageFileMsgBg,O.a.chatMessageBorderRadius,O.a.chatMessageFileItemBg),Bn=function(n){var e;return Object(S.jsx)(Tn,{"data-title":null===(e=n.msg.sys)||void 0===e?void 0:e.title,onClick:function(e){n.msg.sys&&n.msg.sys.additionalData&&v.a.S_FILE_DOWNLOAD_REQUEST.invoke({uid:n.msg.sys.additionalData,name:n.msg.sys.title})}})},Un=j.a.div(tn||(tn=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n"]))),zn=null,Ln=[],Nn=new Map,Pn=[],Hn=new Map;v.a.S_CHAT_OPENING.add((function(n){Ln=n.users.map((function(n){return n.uid})),n.users.map((function(n){return Nn.set(n.uid,n.name)})),Hn=new Map})),v.a.S_CHAT_OPEN_REQUEST.add((function(n){n.chatUID&&(zn=n.chatUID)}));var Qn,Gn,Fn,Wn,Vn,Jn,Zn,Kn,Yn=j.a.div(an||(an=Object(f.a)(["\n  word-wrap: break-word;\n  word-break: break-word;\n  background-color: ",";\n  color: ",';\n  flex-direction: column;\n  &[data-mine="true"] {\n    background-color: ',";\n    color: ",';\n  }\n  &[data-mine="false"] div[data-type="link"] {\n    background-color: ',";\n    color: ",";\n  }\n  align-self: flex-end;\n  padding: 15px 0 15px 0;\n  border-radius: ",';\n  &[data-full-width="true"] {\n    width: calc(100% - 50px);\n  }\n'])),O.a.chatMessageBg,O.a.chatTextColor,O.a.chatMessageBgLeft,O.a.chatMineTextColor,O.a.linkBGColorRight,O.a.linkColorRight,O.a.chatMessageBorderRadius),Xn=j.a.div(rn||(rn=Object(f.a)(["\n  position: absolute;\n  bottom: 1px;\n  left: -45px;\n"]))),qn=j.a.div(on||(on=Object(f.a)(["\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]))),$n=Object(j.a)(qn)(cn||(cn=Object(f.a)(["\n  background-color: ",";\n  color: ",";\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 3px;\n  margin: ",";\n  box-sizing: border-box;\n  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.2);\n  border: 1px dashed #2196f3;\n  transition: background-color 0.2s;\n  &:hover {\n    text-decoration: underline;\n    background-color: ",";\n  }\n"])),O.a.linkBGColor,O.a.linkColor,O.a.chatMessagePadding,O.a.linkBGColorHover),ne=j.a.video(sn||(sn=Object(f.a)(["\n  width: 100%;\n  max-width: 434px;\n  &:first-child {\n    margin-top: 0;\n  }\n  &:last-child {\n    margin-bottom: 0;\n  }\n  margin: ",";\n"])),O.a.chatMessagePadding),ee=Object(j.a)(qn)(dn||(dn=Object(f.a)(["\n  background-color: #0f2a38;\n  max-height: 60vh;\n  overflow: auto;\n  white-space: pre;\n  padding: 10px;\n  font-family: monospace;\n  font-size: 13px;\n  color: #3bffd1;\n  border-radius: 3px;\n  display: flex;\n  flex-direction: column;\n  overflow: auto;\n  margin: ",";\n"])),O.a.chatMessagePadding),te=j.a.div(un||(un=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  margin-bottom: 1px;\n  &::before {\n    content: attr(data-line);\n    display: block;\n    width: 25px;\n    min-width: 25px;\n    background-color: rgba(0, 0, 0, 0.2);\n    border-right: 1px solid rgba(0, 0, 0, 0.6);\n    margin-right: 8px;\n    padding: 3px;\n    color: rgba(255, 255, 255, 0.5);\n  }\n"]))),ae=Object(j.a)(qn)(ln||(ln=Object(f.a)(["\n  margin: 0 15px 0 15px;\n"]))),re=function(n){var e=n.data,t=e.content,a=e.type;if("link"===a){var r=document.createElement("a");r.href=t,r.target="_blank",r.style.display="absoulte";var i=function(n){document.body.appendChild(r),r.click(),r.remove()},o=t;return o.length>40&&(o=(o=t.substr(0,15)+"..."+t.substr(15)).substr(0,35)),t.toLowerCase().endsWith(".mp4")?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(ne,{controls:!0,src:t,children:Object(S.jsx)("source",{src:t,type:"video/mp4"})}),Object(S.jsx)($n,{"data-type":"link",onClick:i,children:t})]}):Object(S.jsx)($n,{"data-type":"link",onClick:i,children:t})}if("code"===a){var c=t.split("\n"),s=1,d=c.map((function(n){return Object(S.jsx)(te,{"data-line":s,children:n},s++)}));return Object(S.jsx)(ee,{"data-type":"code",children:d})}return Object(S.jsx)(ae,{children:t})},ie=Object(A.memo)((function(n){var e=n.msg,t=e.text,a=e.mine,r="%{blck#$}",i=[],o=!1,c=(t=t.replace(/(\b((https:\/\/)|(http:\/\/)|(ftp:\/\/)|(www\.))((.*?)[^\s\n\t\r\v]*))|\n|{code}([\w\W]+?){code}|{code}([\w\W]+?){\/code}/gim,(function(n,e){return"\n"===n?(i.push({type:"br",content:""}),r):n.toLowerCase().startsWith("{code}")?(i.push({type:"code",content:n.substr(6,n.length-12)}),o=!0,r):(i.push({type:"link",content:n}),r)}))).split(r),s=[];for(var d in c){var u=c[d];u.length>0&&s.push({type:"text",content:u});var l=i[d];l&&s.push(l)}var p=0,g=s.map((function(n){return Object(S.jsx)(re,{data:n},p++)})),b=null;return"+"===t&&(b="plus"),"-"===t&&(b="minus"),Object(S.jsx)(Yn,{"data-status":b,"data-full-width":o,"data-mine":a,"data-type":"message",children:g})})),oe=j.a.div(pn||(pn=Object(f.a)(["\n  width: 88%;\n  max-width: 88%;\n  position: relative;\n  align-self: flex-start;\n  align-items: center;\n  display: flex;\n  color: ",';\n  &[data-mine="true"] {\n    justify-content: flex-end;\n    align-self: flex-end;\n    color: ',';\n  }\n  &[data-mine="false"] {\n    flex-direction: row-reverse;\n    justify-content: flex-end;\n    margin-left: 50px;\n  }\n\n  &[data-mine="true"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n  &[data-mine="false"] {\n    &[data-position="last"],\n    &[data-position="standalone"] {\n      & div[data-type="message"] {\n        ','\n      }\n    }\n  }\n\n  & > div[data-status="plus"] {\n    background-color: #4caf50;\n    color: white;\n    :before {\n      border-color: #4caf50 !important;\n    }\n  }\n  & > div[data-status="minus"] {\n    background-color: #ce3f44;\n    color: white;\n    :before {\n      border-color: #ce3f44 !important;\n    }\n  }\n\n  &[data-mine="true"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-mine="false"] {\n    &[data-position="middle"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="first"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n\n    &[data-position="last"] {\n      & div[data-type="message"] {\n        border-radius: '," "," "," ",';\n      }\n    }\n  }\n\n  &[data-position="middle"],\n  &[data-position="first"],\n  &[data-position="last"] {\n    margin-bottom: 1px;\n  }\n  &[data-position="standalone"],\n  &[data-position="last"] {\n    margin-bottom: 30px;\n  }\n  &:hover > div[data-type="time"] {\n    opacity: 1;\n    transition: opacity 0.2s;\n  }\n'])),O.a.chatMessageColorLeft,O.a.chatMessageColorRight,O.a.messageCloudTaleRight,O.a.messageCloudTaleLeft,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageSmallBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius,O.a.chatMessageBorderRadius),ce=j.a.div(gn||(gn=Object(f.a)(["\n  font-size: 10px;\n  white-space: nowrap;\n  color: ",";\n  opacity: 0;\n  margin: 0 10px 0 10px;\n  transition: opacity 0.2s 5s;\n  user-select: none;\n  pointer-events: none;\n  /* background-color: #213346b7;\n    padding:3px 7px 3px 7px;\n    border-radius:9px;\n    color:white;*/\n"])),O.a.chatMessageTimeColor),se=j.a.div(bn||(bn=Object(f.a)(["\n  font-size: 11px;\n  position: absolute;\n  top: -16px;\n  color: ",";\n"])),O.a.chatMessageAuthorColor),de=j.a.div(hn||(hn=Object(f.a)(["\n  /*background-color: #213346b7;*/\n  background-color: #5a6979;\n  padding: 5px 15px 5px 15px;\n  font-size: 11px;\n  color: rgba(255, 255, 255, 1);\n  white-space: nowrap;\n  border-radius: 10px;\n  margin: 0px 0 25px 0;\n  text-align: center;\n  width: 120px;\n  align-self: center;\n  position: sticky;\n  z-index: 10;\n  top: 10px;\n"]))),ue=function(n){var e=An.a.dateFormatter.format(n.message.created,"%h:%i");return Object(S.jsx)(ce,{"data-type":"time",children:e})},le=function(n){var e,t=n.message,a=null;t.sys&&("botMenu"===t.type&&(a=Object(S.jsx)(Cn,{data:t.sys,msg:t})),"botCommand"===t.type&&(a=Object(S.jsx)(wn,{msg:t})),"img"===t.type&&(a=Object(S.jsx)(_n,{msg:t})),"file"===t.type&&(a=Object(S.jsx)(Bn,{msg:t})),null==a&&(t.text=null===(e=t.sys)||void 0===e?void 0:e.title),t.text||(t.text="System msg ".concat(t.sys.method," without title")));var r=null;t.date&&(r=Object(S.jsx)(de,{children:t.date}));var i=null,o=null;t.mine||"first"!==t.position&&"standalone"!==t.position||(i=Object(S.jsx)(se,{children:t.user_name})),t.mine||"last"!==t.position&&"standalone"!==t.position||(o=Object(S.jsx)(Xn,{children:Object(S.jsx)(mn.a,{user:t.user_name,avatar:t.user_avatar})})),null==a&&(a=Object(S.jsx)(ie,{msg:t}));var c=Pn.filter((function(n){return n?n>=t.id:null})).length,s=Math.max.apply(Math,Object(fn.a)(Pn)),d=[];return Hn.forEach((function(n,e){var a,r=null===(a=Hn.get(e))||void 0===a?void 0:a.lastReadMsgID;if(r&&r>=t.id){var i=Nn.get(e);i&&d.push(i)}})),Object(S.jsxs)(S.Fragment,{children:[r,Object(S.jsxs)(oe,{"data-position":t.position,"data-mine":t.mine,onClick:function(e){e.shiftKey&&console.log(n.message)},children:[Object(S.jsx)(ue,{message:t}),i,t.mine&&c&&c!==Ln.length&&Object(S.jsx)(Mn,{total:Ln.length,progress:c,chipText:"Read by: ".concat(d.join(", "))})||null,t.mine&&c&&c===Ln.length&&s===t.id&&Object(S.jsx)(vn,{status:"read"})||null,t.mine&&!c&&Object(S.jsx)(vn,{status:"delivered"}),a,o]})]})},pe=function(){var n=Object(A.useState)([]),e=Object(E.a)(n,2),t=e[0],a=e[1];Pn=Ln.map((function(n){var e;return(null===(e=Hn.get(n))||void 0===e?void 0:e.lastReadMsgID)||0})),Object(A.useEffect)((function(){return v.a.S_CHAT_MESSAGES.add((function(n){zn===n.chatUID&&a(Object(fn.a)(n.msgs))}),"ChatMessages"),v.a.S_CHAT_STATUS_READ.add((function(){zn&&v.a.REQ_LAST_READ_MSG.invoke({chatUID:zn}).then((function(n){n&&(Hn=n)}))}),"ChatMessages"),v.a.S_GUI_MESSAGES_RENDERED.invoke(),function(){v.a.S_CHAT_MESSAGES.clearContext("ChatMessages"),v.a.S_CHAT_STATUS_READ.clearContext("ChatMessages")}}));var r=null,i=0;return t&&t.length>0&&(r=t.map((function(n){return Object(S.jsx)(le,{message:n},i++)}))),Object(S.jsx)(Un,{children:r})},ge=t(30),be=t(22),he=t(28),xe=j.a.div(Qn||(Qn=Object(f.a)(["\n    font-size:20px;\n    position: absolute;\n    top:66px;\n    right:8px;\n    user-select:none;\n    pointer-events: none;\n    display:flex;\n    width:100%;\n    flex-direction: column;\n    align-items: flex-end;\n    z-index:30;\n"]))),fe=j.a.div(Gn||(Gn=Object(f.a)(['\n    padding:5px 10px 5px 10px;\n    font-size:11px;\n    background-color:rgba(0,0,0,.7);\n    color:white;\n    border-radius: 10px;\n    max-width: 50%;\n    overflow:hidden;\n    text-overflow: ellipsis;\n    white-space:nowrap;\n    margin-bottom: 2px;\n    box-shadow:0px 1px 2px rgba(0,0,0,.3);\n    &[data-status="finish"]{\n        background-color: #3b548e;\n    }\n    &[data-status="fail"]{\n        background-color: #ce3f44;\n    }\n']))),Ae=function(n){return Object(S.jsx)(fe,{"data-status":n.data.status,children:n.data.file.name})},me=function(){var n=Object(A.useState)([]),e=Object(E.a)(n,2),t=e[0],a=e[1];Object(A.useEffect)((function(){return v.a.S_FILE_UPLOADING_LIST_UPDATED.add((function(n){a(n)}),"ChatUploadingFiles"),function(){v.a.S_FILE_UPLOADING_LIST_UPDATED.clearContext("ChatUploadingFiles")}}));var r=0,i=t.map((function(n){return Object(S.jsx)(Ae,{data:n},r++)}));return Object(S.jsx)(xe,{children:i})},je=j.a.div(Fn||(Fn=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: rgba(0, 0, 0, 0.65);\n"]))),ve=j.a.div(Wn||(Wn=Object(f.a)(["\n  width: 80%;\n  max-height: 80%;\n  min-height: 10%;\n  border-radius: 10px;\n  padding: 10px;\n  background-color: white;\n  box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1);\n  color: #e91e63;\n  display: flex;\n  font-size: 15px;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  white-space: pre-line;\n  overflow-x: hidden;\n  overflow-y: auto;\n"]))),Oe=function(){var n=Object(A.useState)(null),e=Object(E.a)(n,2),t=e[0],a=e[1];Object(A.useEffect)((function(){return v.a.S_ALERT_ERROR.add((function(n){v.a.S_LOGE.invoke(n),a(n)}),"alert"),function(){v.a.S_ALERT_ERROR.clearContext("alert")}}));return t?Object(S.jsx)(je,{onClick:function(n){a(null)},children:Object(S.jsx)(ve,{children:t})}):Object(S.jsx)(S.Fragment,{})};ge.a.registerPlugin(he.a);var Ee,Me,Se,we,Ie=Object(j.b)(Vn||(Vn=Object(f.a)(["\n    from {\n        transform: translateY(10px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0px);\n        opacity: 1;\n    }\n"]))),ye=j.a.div(Jn||(Jn=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]))),ke=j.a.div(Zn||(Zn=Object(f.a)(["\n  position: absolute;\n  border-radius: 15px;\n  padding: 5px 10px;\n  background: ",";\n  color: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  animation: "," 0.5s linear;\n  transition: 0.5s ease;\n  min-width: 200px;\n  max-width: 100%;\n  z-index: 11;\n"])),O.a.toastBGColor,O.a.toastTextColor,Ie),De=j.a.div(Kn||(Kn=Object(f.a)(["\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAABQElEQVRoge2ZwU7DMBAF2/w7ggOlEge4kP5jBeU6XBI1PJyQxt61K+07Rsm+GUeOanW3i0QikYhVgAfgE3gFOsfebuj8Ah5zBp25pveQGOD7Se85Z9gzv2MqkYAHOOQM3ANvMvBkITF0vRdfMA8JM3gpMJEwh5eiohJu8FJYRMIdXoqzJKrBC8AmierwAnKTRDPwArRKojl4AVuUaBZ+zJJE8/BjBtiPBKj+tmkPfszMm7gP+DELEibwVquxX3mtrcxs2D8buzZnMqQPI/exiWdWvuf6GXU5FG3KErzc057EGni5tx2JW+DlmfoSW+Dl2XoSOfAyw1+iBLzM8pMoCS8z7SUs4GW2nYQlvHSUl/CAl66yEsDRA37SlzoUHXMGfnvBTzpV4pIz7Am4AC8e8JPeDjgM3dv/4IhEIpHIf/kBoa3r5F4Qe6YAAAAASUVORK5CYII=);\n  width: 15px;\n  height: 15px;\n  min-width: 15px;\n  min-height: 15px;\n  cursor: pointer;\n  background-size: 15px;\n  margin-left: 5px;\n"]))),Ce=function(n){var e=Object(A.useRef)(null),t=function(t){e.current&&(e.current.getAttribute("active")||be.d.to(e.current,.5,{opacity:0,top:"0px",ease:"ease",onComplete:function(){e.current&&(e.current.style.opacity="1",e.current.style.top="calc(50px + (".concat(n.position," * 35px))"),e.current.setAttribute("active","1")),v.a.S_TOAST_DELETE.invoke(t),v.a.REQ_TOASTS.invoke().then((function(e){return n.setToasts(e)}))}}),e.current.getAttribute("active")&&e.current.removeAttribute("active"))};return n.deletedToast===n.toast.tempUID&&t(n.toast.tempUID),Object(S.jsxs)(ke,{style:{top:"calc(50px + (".concat(n.position," * 35px))")},ref:e,children:[n.toast.text,Object(S.jsx)(De,{onClick:function(){return t(n.toast.tempUID)}})]})},Re=function(){var n=Object(A.useState)([]),e=Object(E.a)(n,2),t=e[0],a=e[1],r=Object(A.useState)(null),i=Object(E.a)(r,2),o=i[0],c=i[1];return Object(A.useEffect)((function(){return v.a.S_TOAST.add((function(){v.a.REQ_TOASTS.invoke().then((function(n){return a(n)}))}),"toast"),v.a.S_TOAST_DELETE.add((function(n){c(n)}),"toast"),function(){v.a.S_TOAST.clearContext("toast"),v.a.S_TOAST_DELETE.clearContext("toast")}}),[]),Object(S.jsx)(ye,{children:t.length>0&&t.map((function(n,e){return Object(S.jsx)(Ce,{toast:n,position:e,deletedToast:o,setToasts:a},n.state+e)}))})};ge.a.registerPlugin(he.a);var _e=25,Te=25,Be="320px",Ue="60vh",ze=j.a.div(Ee||(Ee=Object(f.a)(["\n  bottom: ","px;\n  right: ","px;\n"])),Te,_e),Le=Object(j.a)(ze)(Me||(Me=Object(f.a)(['\n  display: flex;\n  font-family: "Open Sans", sans-serif;\n  flex-direction: column;\n  position: absolute;\n  width: ',";\n  height: ",";\n  background-color: ",";\n  border-radius: 30px;\n  overflow: hidden;\n  font-size: ",';\n  box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.2);\n  transition: height 0.2s, width 0.2s;\n  line-height: normal !important;\n  transform: scaleZ(1);\n  &[data-mobile="true"] {\n    position: relative;\n    bottom: auto;\n    right: auto;\n    left: 0;\n    top: 0;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    width: 100vw;\n    height: 100vh;\n    box-shadow: none;\n  }\n\n  &[data-messenger="true"] {\n    position: relative;\n    height: auto;\n    bottom: auto;\n    right: auto;\n    border-radius: 0;\n    transition: none;\n    flex-grow: 1;\n    max-width: 600px;\n    box-shadow: none;\n  }\n'])),Be,Ue,O.a.chatBG,O.a.chatMessageTextSize),Ne=j.a.div(Se||(Se=Object(f.a)(["\n  flex-grow: 1;\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: auto;\n  width: calc(100% - 5px);\n"]))),Pe=j.a.div(we||(we=Object(f.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0;\n"]))),He=null;e.default=function(n){var e=0,t=0,a=0,r=0,i=Object(A.useRef)(null),o=Object(A.useRef)(null),c=function(n){if(i.current){var o=a-(n.clientX-e),c=r-(n.clientY-t);i.current.style.bottom=c+"px",i.current.style.right=o+"px",s()}},s=function(){if(i.current){var n=i.current.getBoundingClientRect(),e=parseInt(i.current.style.right),t=parseInt(i.current.style.bottom);if(!isNaN(e)&&!isNaN(t)){e<_e&&(e=_e),t<Te&&(t=Te);var a=window.innerWidth-n.width,r=window.innerHeight-n.height;e>a&&(e=a),t>r&&(t=r),i.current.style.bottom=t+"px",i.current.style.right=e+"px"}}},d=function(n){s()},u=function(n){c(n)},l=function n(e){c(e),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",n)},p=function(){i.current&&(He&&He.kill(),i.current.setAttribute("opening","1"),i.current.removeAttribute("expanded"),i.current.style.opacity="0",i.current.style.removeProperty("display"),He=be.d.to(i.current,.2,{width:Be,height:Ue,bottom:Te+"px",right:_e+"px",opacity:1,ease:be.c.easeIn,onComplete:function(){i.current&&i.current.removeAttribute("opening"),v.a.S_GUI_CHAT_OPENED.invoke()}}))};Object(A.useEffect)((function(){v.a.S_GUI_MESSAGES_RENDERED.add((function(){o.current&&(o.current.scrollTop=o.current.scrollHeight-o.current.clientHeight),i.current&&"none"===i.current.style.display&&p()}),"chat");var e=window.__DCCSharedObject;return e&&!n.sharedObject.messenger&&i.current&&(n.sharedObject.mobile||(i.current.style.right=_e+"px",i.current.style.bottom=Te+"px",e.bottomOffset&&!isNaN(e.bottomOffset)&&(Te=e.bottomOffset),e.rightOffset&&!isNaN(e.rightOffset)&&(_e=e.rightOffset)),s()),v.a.S_GUI_CLOSE_CHAT.add((function(n){i.current&&(He&&He.kill(),i.current.setAttribute("closing","1"),i.current.removeAttribute("expanded"),He=be.d.to(i.current,.2,{width:0,height:0,bottom:Te+"px",right:_e+"px",opacity:0,ease:be.c.easeIn,onComplete:function(){i.current&&(i.current.style.display="none",i.current.removeAttribute("closing")),v.a.S_GUI_CHAT_CLOSED.invoke()}}))}),"chat"),v.a.S_GUI_OPEN_CHAT.add((function(){p()}),"chat"),n.sharedObject.messenger||window.addEventListener("resize",d),function(){window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",l),window.removeEventListener("resize",d),v.a.S_GUI_MESSAGES_RENDERED.clearContext("chat"),v.a.S_GUI_CLOSE_CHAT.clearContext("chat"),v.a.S_GUI_OPEN_CHAT.clearContext("chat"),v.a.S_GUI_REPOSITION_CHAT.clearContext("chat"),He&&He.kill()}}));var g=function(n){n.preventDefault();for(var e=[],t=n.dataTransfer.files.length,a=0;a<t;a++){var r=n.dataTransfer.files.item(a);r&&e.push(r)}v.a.S_FILE_PREVIEW_ATTACH.invoke(e)},b=function(n){n.preventDefault()},h=n.sharedObject.headless?null:Object(S.jsx)(R,{messenger:n.sharedObject.messenger,onDoubleClick:function(e){i.current&&(i.current.getAttribute("closing")||n.sharedObject.messenger||n.sharedObject.mobile||(i.current.getAttribute("expanded")?(He=be.d.to(i.current,.2,{width:320,height:"50vh",bottom:Te+"px",right:_e+"px",ease:be.c.easeOut}),i.current.removeAttribute("expanded")):(He=be.d.to(i.current,.2,{width:390,height:"calc(95vh - ".concat(Te,"px)"),bottom:Te+"px",right:_e+"px",ease:be.c.easeOut}),i.current.setAttribute("expanded","1"))))}});return n.sharedObject.messenger?Object(S.jsxs)(Le,{id:"DukascopyConnect","data-messenger":n.sharedObject.messenger,ref:i,children:[h,Object(S.jsx)(Ne,{ref:o,onDrop:g,onDragOver:b,children:Object(S.jsx)(Pe,{children:Object(S.jsx)(pe,{})})}),Object(S.jsx)(me,{}),Object(S.jsx)(xn,{messenger:n.sharedObject.messenger}),Object(S.jsx)(Re,{}),Object(S.jsx)(Oe,{})]}):Object(S.jsxs)(Le,{id:"DukascopyConnect","data-mobile":n.sharedObject.mobile,ref:i,onMouseDown:function(o){if(!n.sharedObject.mobile&&i.current&&"chatHead"===o.target.id){e=o.clientX,t=o.clientY;var c=i.current.getBoundingClientRect();a=c.left,r=c.top,a=parseInt(i.current.style.right),r=parseInt(i.current.style.bottom),isNaN(a)&&(a=_e,i.current.style.right=a+"px"),isNaN(r)&&(r=Te,i.current.style.bottom=r+"px"),window.addEventListener("mousemove",u),window.addEventListener("mouseup",l)}},children:[h,Object(S.jsx)(Ne,{ref:o,onDrop:g,onDragOver:b,children:Object(S.jsx)(Pe,{children:Object(S.jsx)(pe,{})})}),Object(S.jsx)(me,{}),Object(S.jsx)(xn,{}),Object(S.jsx)(Oe,{})]})}}}]);